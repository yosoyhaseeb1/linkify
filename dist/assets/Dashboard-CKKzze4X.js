import{c as q,u as D,a as T,r as g,p as M,b as E,j as e,S as U,T as V,L as h,A as j,C as k,d as B}from"./index-EQAU33AY.js";import{u as G,g as K,a as O}from"./useRuns-B67FFnPB.js";import{S as Q,a as i}from"./Skeleton-BHG0MYnU.js";import{F as Y}from"./flame-DA6XEWSS.js";import{B as P}from"./building-2-DtjSfEWU.js";import{C as R}from"./circle-play-CsBEaPAm.js";import{P as $}from"./plus-CsoShjA1.js";import{C as z}from"./calendar-B-Yy3hL1.js";import{C as J}from"./circle-C80oiwvE.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=q("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);function X(p){const{getToken:t}=D(),{currentOrg:a}=T(),o=a==null?void 0:a.id,u=1,n=50,{data:r,isLoading:x,error:N,refetch:d}=G({queryKey:["prospects",o,u,n],queryFn:async()=>{const m=await K(t),f=(u-1)*n,w=f+n;return{prospects:m.slice(f,w),totalCount:m.length}},enabled:!!o});return{prospects:(r==null?void 0:r.prospects)||[],isLoading:x,error:N,refetch:d,totalCount:(r==null?void 0:r.totalCount)||0}}function Z(){const{getToken:p}=D(),{currentOrg:t}=T(),[a,o]=g.useState(null),[u,n]=g.useState(!0),[r,x]=g.useState(!1);g.useEffect(()=>{t!=null&&t.id&&N()},[t==null?void 0:t.id]);const N=async()=>{try{const d=await p();if(!d||!(t!=null&&t.id)){n(!1);return}const m=await fetch(`https://${M}.supabase.co/functions/v1/make-server-0d5eb2a5/warmup/${t==null?void 0:t.id}`,{headers:{Authorization:`Bearer ${E}`,"x-clerk-token":d}});if(m.ok){const f=await m.json();o(f)}else console.error("Error loading warmup status:",m.status,await m.text())}catch(d){console.error("Error loading warmup status:",d)}finally{n(!1)}};return u?e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded w-1/3 mb-3"}),e.jsx("div",{className:"h-2 bg-white/10 rounded w-full"})]}):!a||a.warmupComplete?null:e.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-orange-500/10 to-yellow-500/10 border border-orange-500/20 rounded-lg px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-orange-500/20 rounded",children:e.jsx(Y,{className:"w-3.5 h-3.5 text-orange-400"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white text-sm font-medium",children:"Warmup"}),e.jsxs("span",{className:"text-white/60 text-xs",children:["Day ",a.daysSinceStart,"/",a.totalDays]})]})]}),e.jsx("div",{className:"relative h-1.5 w-24 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-orange-500 to-yellow-500 rounded-full transition-all duration-500",style:{width:`${a.progress}%`}})}),a.today&&e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-white/60",children:"Runs:"}),e.jsxs("span",{className:"text-white font-medium",children:[a.today.runsUsed,"/",a.today.runsLimit]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-white/60",children:"Invites:"}),e.jsxs("span",{className:"text-white font-medium",children:[a.today.invitesUsed,"/",a.today.invitesLimit]})]})]}),e.jsx("button",{onClick:()=>x(!r),className:"p-1 hover:bg-white/10 rounded transition-colors ml-auto",title:"Why warmup?",children:e.jsx(H,{className:"w-3.5 h-3.5 text-white/40"})}),r&&e.jsx("div",{className:"absolute top-full right-0 mt-2 w-80 bg-black/95 border border-orange-500/20 rounded-lg p-3 shadow-xl z-50",children:e.jsxs("div",{className:"flex items-start gap-2 text-white/80 text-xs",children:[e.jsx(U,{className:"w-4 h-4 text-orange-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white mb-1",children:"Why warmup?"}),e.jsx("p",{children:"LinkedIn monitors new accounts for suspicious activity. Gradually increasing your outreach volume over 2 weeks keeps your account safe and improves response rates."})]})]})})]})}function ce(){var L,I;const{currentOrg:p,usage:t,loadingOrg:a}=T(),{user:o,getToken:u}=D(),[n,r]=g.useState(!0),[x,N]=g.useState([]),[d,m]=g.useState([]),{runs:f,isLoading:w}=O(),{isLoading:_}=X(),F=w||_,l={conversation_started:d.filter(s=>s.stage==="conversation_started").length,qualification:d.filter(s=>s.stage==="qualification").length,proposal_sent:d.filter(s=>s.stage==="proposal_sent").length,signed_mandate:d.filter(s=>s.stage==="signed_mandate").length,lost:d.filter(s=>s.stage==="lost").length},C=l.conversation_started+l.qualification+l.proposal_sent+l.signed_mandate,b=new Date;b.setDate(b.getDate()-7);const W=x.filter(s=>new Date(s.created_at)>=b).length,A=new Date().toDateString(),v=x.filter(s=>!s.completed).filter(s=>{const c=new Date(s.due_date).toDateString(),y=new Date;return y.setDate(y.getDate()+1),c===A||c===y.toDateString()}).slice(0,3).map(s=>({id:s.id,title:s.title,prospect:s.prospect_name,company:s.prospect_company,due:new Date(s.due_date).toDateString()===A?"Today":"Tomorrow",overdue:new Date(s.due_date)<new Date,priority:s.priority})),S=f.sort((s,c)=>new Date(c.createdAt).getTime()-new Date(s.createdAt).getTime()).slice(0,3).map(s=>({id:s.id,jobTitle:s.jobTitle,company:s.company,status:s.status,date:ee(s.createdAt)}));return(l.signed_mandate/(C+l.signed_mandate+l.lost)*100).toFixed(0),!a&&!p?e.jsx("div",{className:"p-4 md:p-8",children:e.jsx("div",{className:"max-w-2xl mx-auto mt-20",children:e.jsxs("div",{className:"glass-card rounded-xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(P,{className:"w-8 h-8 text-primary"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"No Organization Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"You need to create or join an organization to use Lynqio."}),e.jsxs("div",{className:"space-y-3 text-left",children:[e.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[e.jsx("p",{className:"font-semibold mb-2",children:"ðŸ¢ Create an Organization"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Go to your Clerk Dashboard to create a new organization, or use the Clerk components to set one up."})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[e.jsx("p",{className:"font-semibold mb-2",children:"ðŸ‘¥ Join an Organization"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ask your team admin to send you an invitation to join their organization."})]})]})]})})}):e.jsxs("div",{className:"p-4 md:p-5 h-full overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"mb-3 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-lg",children:"Dashboard"}),e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${n?"bg-green-500":"bg-red-500"} animate-pulse`}),e.jsx("span",{className:"text-xs text-muted-foreground",children:n?"Connected":"Offline"})]})]}),e.jsx("div",{className:"relative",children:e.jsx(Z,{})})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:["Welcome back",o?`, ${(o.firstName||((L=o.email)==null?void 0:L.split("@")[0])||"").charAt(0).toUpperCase()+(o.firstName||((I=o.email)==null?void 0:I.split("@")[0])||"").slice(1).toLowerCase()}`:""]})]}),F||a?e.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-3 flex-shrink-0",children:[...Array(4)].map((s,c)=>e.jsx(Q,{},c))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 flex-1 min-h-0 overflow-hidden",children:[e.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-3 min-h-0",children:[e.jsxs("div",{className:"glass-card rounded-xl p-4 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx(i,{width:"40%",height:18,className:"mb-1"}),e.jsx(i,{width:"60%",height:12})]}),e.jsx(i,{width:"150px",height:32})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2",children:[...Array(5)].map((s,c)=>e.jsxs("div",{className:"bg-muted/30 rounded-lg p-2",children:[e.jsx(i,{width:"80%",height:12,className:"mb-1"}),e.jsx(i,{width:"50%",height:20})]},c))})]}),e.jsxs("div",{className:"glass-card rounded-xl p-4 flex-1 min-h-0 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 flex-shrink-0",children:[e.jsx(i,{width:"120px",height:18}),e.jsx(i,{width:"70px",height:12})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[...Array(3)].map((s,c)=>e.jsxs("div",{className:"p-2.5 bg-muted/30 rounded-lg",children:[e.jsx(i,{width:"80px",height:12,className:"mb-1.5"}),e.jsx(i,{width:"100%",height:12,className:"mb-1"}),e.jsx(i,{width:"75%",height:10})]},c))})]})]}),e.jsxs("div",{className:"lg:col-span-4 glass-card rounded-xl p-4 flex flex-col min-h-0 overflow-hidden",children:[e.jsxs("div",{className:"mb-3 flex-shrink-0",children:[e.jsx(i,{width:"140px",height:18,className:"mb-1"}),e.jsx(i,{width:"180px",height:12})]}),e.jsx("div",{className:"space-y-2 flex-1 overflow-y-auto",children:[...Array(3)].map((s,c)=>e.jsxs("div",{className:"flex items-start gap-2.5 p-2.5 bg-muted/30 rounded-lg",children:[e.jsx(i,{width:14,height:14,className:"flex-shrink-0 mt-0.5 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(i,{width:"100%",height:12,className:"mb-1.5"}),e.jsx(i,{width:"66%",height:10})]})]},c))})]})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-3 flex-shrink-0",children:[e.jsxs("div",{className:"glass-card rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"p-1.5 bg-blue-500/10 rounded-lg",children:e.jsx(V,{className:"w-4 h-4 text-blue-500"})}),e.jsxs(h,{to:"/pipeline",className:"text-xs text-primary hover:text-primary-hover transition-colors flex items-center gap-1",children:["View All",e.jsx(j,{className:"w-3 h-3"})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-2xl",children:C}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Deals"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.signed_mandate," signed, ",l.lost," lost"]})]}),e.jsxs("div",{className:"glass-card rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"p-1.5 bg-orange-500/10 rounded-lg",children:e.jsx(k,{className:"w-4 h-4 text-orange-500"})}),e.jsxs(h,{to:"/tasks",className:"text-xs text-primary hover:text-primary-hover transition-colors flex items-center gap-1",children:["View All",e.jsx(j,{className:"w-3 h-3"})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-2xl",children:v.filter(s=>s.due==="Today").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tasks Due Today"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[W," total tasks this week"]})]}),e.jsxs("div",{className:"glass-card rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"p-1.5 bg-green-500/10 rounded-lg",children:e.jsx(B,{className:"w-4 h-4 text-green-500"})}),e.jsxs(h,{to:"/pipeline",className:"text-xs text-primary hover:text-primary-hover transition-colors flex items-center gap-1",children:["View All",e.jsx(j,{className:"w-3 h-3"})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-2xl",children:l.signed_mandate}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Signed this month"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[d.length," total contacts"]})]}),e.jsxs("div",{className:"glass-card rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"p-1.5 bg-purple-500/10 rounded-lg",children:e.jsx(R,{className:"w-4 h-4 text-purple-500"})}),e.jsxs(h,{to:"/runs/new",className:"text-xs text-primary hover:text-primary-hover transition-colors flex items-center gap-1",children:["New Run",e.jsx($,{className:"w-3 h-3"})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-2xl",children:t.runsLimit-t.runsUsed}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Runs Remaining"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.runsUsed," of ",t.runsLimit," used this month"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 flex-1 min-h-0 overflow-hidden",children:[e.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-3 min-h-0",children:[e.jsxs("div",{className:"glass-card rounded-xl p-4 flex-shrink-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base mb-0.5",children:"Pipeline Overview"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Track your deals across stages"})]}),e.jsx(h,{to:"/pipeline",className:"px-3 py-1.5 bg-primary text-primary-foreground rounded-lg text-xs hover:bg-primary-hover transition-colors text-center",children:"View Full Pipeline"})]}),e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-5 gap-2",children:[e.jsxs("div",{className:"bg-muted/30 rounded-lg p-2.5 flex items-center justify-between lg:block",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-xs font-medium",children:"Conversation"})]}),e.jsx("div",{className:"text-xl font-semibold",children:l.conversation_started})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg p-2.5 flex items-center justify-between lg:block",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),e.jsx("span",{className:"text-xs font-medium",children:"Qualification"})]}),e.jsx("div",{className:"text-xl font-semibold",children:l.qualification})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg p-2.5 flex items-center justify-between lg:block",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),e.jsx("span",{className:"text-xs font-medium",children:"Proposal"})]}),e.jsx("div",{className:"text-xl font-semibold",children:l.proposal_sent})]}),e.jsxs("div",{className:"bg-emerald-500/10 rounded-lg p-2.5 border border-emerald-500/20 flex items-center justify-between lg:block",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-xs font-medium text-emerald-500",children:"Signed"})]}),e.jsx("div",{className:"text-xl font-semibold text-emerald-500",children:l.signed_mandate})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg p-2.5 flex items-center justify-between lg:block",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),e.jsx("span",{className:"text-xs font-medium",children:"Lost"})]}),e.jsx("div",{className:"text-xl font-semibold text-muted-foreground",children:l.lost})]})]})]}),e.jsxs("div",{className:"glass-card rounded-xl p-4 order-3 lg:order-none flex-1 min-h-0 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 flex-shrink-0",children:[e.jsx("h2",{className:"text-base",children:"Recent Runs"}),e.jsxs(h,{to:"/runs",className:"text-xs text-primary hover:text-primary-hover transition-colors flex items-center gap-1",children:["View All",e.jsx(j,{className:"w-3 h-3"})]})]}),S.length===0?e.jsxs("div",{className:"text-center text-muted-foreground flex-1 flex flex-col items-center justify-center py-4",children:[e.jsx(R,{className:"w-10 h-10 mx-auto mb-2 text-muted-foreground/50"}),e.jsx("p",{className:"text-sm mb-3",children:"No runs yet"}),e.jsxs(h,{to:"/runs/new",className:"inline-flex items-center gap-2 px-3 py-1.5 bg-primary text-primary-foreground rounded-lg text-xs font-medium hover:bg-primary-hover transition-colors",children:[e.jsx($,{className:"w-3.5 h-3.5"}),"Create Your First Run"]})]}):e.jsx("div",{className:"space-y-2",children:S.map(s=>e.jsx(h,{to:`/runs/${s.id}`,className:"block p-4 bg-muted/30 hover:bg-muted/50 rounded-lg transition-colors group",children:e.jsxs("div",{className:"flex items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx(k,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm text-green-500 font-medium",children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[e.jsx("span",{className:"text-sm font-medium truncate",children:s.jobTitle}),e.jsx("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:"at"}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[e.jsx(P,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.company})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(z,{className:"w-4 h-4"}),e.jsx("span",{children:s.date})]}),e.jsx(j,{className:"w-5 h-5 text-muted-foreground group-hover:text-foreground group-hover:translate-x-1 transition-all"})]})]})},s.id))})]})]}),e.jsxs("div",{className:"lg:col-span-4 glass-card rounded-xl p-4 order-2 lg:order-none flex flex-col min-h-0 overflow-hidden",children:[e.jsxs("div",{className:"mb-4 flex-shrink-0",children:[e.jsx("h2",{className:"text-base mb-0.5",children:"Tasks Due Today"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[v.filter(s=>s.due==="Today").length," tasks need your attention"]})]}),e.jsx("div",{className:"space-y-2 flex-1 overflow-y-auto",children:v.length===0?e.jsxs("div",{className:"text-center text-muted-foreground h-full flex flex-col items-center justify-center py-4",children:[e.jsx(k,{className:"w-10 h-10 mx-auto mb-2 text-green-500"}),e.jsx("p",{className:"text-sm",children:"All caught up! No tasks due today."})]}):e.jsx(e.Fragment,{children:v.map(s=>e.jsxs("div",{className:"flex items-start gap-2.5 p-2.5 bg-muted/30 rounded-lg",children:[e.jsx("button",{className:"flex-shrink-0 mt-0.5",children:e.jsx(J,{className:"w-3.5 h-3.5 text-muted-foreground hover:text-primary transition-colors"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs mb-1",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{className:"truncate",children:s.prospect}),e.jsxs("span",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx(z,{className:"w-3 h-3"}),e.jsx("span",{className:s.due==="Today"?"text-orange-500":"",children:s.due})]})]})]})]},s.id))})})]})]})]})]})}function ee(p){const t=new Date(p),o=new Date().getTime()-t.getTime(),u=Math.floor(o/1e3),n=Math.floor(u/60),r=Math.floor(n/60),x=Math.floor(r/24);return x>0?`${x}d ago`:r>0?`${r}h ago`:n>0?`${n}m ago`:"just now"}export{ce as Dashboard};
