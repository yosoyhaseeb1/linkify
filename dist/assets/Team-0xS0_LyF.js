import{a as E,u as T,r as n,j as e,S as c,o as r}from"./index-EQAU33AY.js";import{c as a}from"./Skeleton-BHG0MYnU.js";import{P as z}from"./plus-CsoShjA1.js";import{U as o}from"./user-B9hut--a.js";import{E as M}from"./ellipsis-vertical-3Q3gJHG9.js";import{T as C}from"./trash-2-DNzLU7cH.js";import{M as $}from"./mail-DipvDLRb.js";function L(){const{members:u,inviteMember:S,removeMember:A,updateMemberRole:F,currentOrg:l,loadingMembers:g}=E(),{user:i}=T(),[I,p]=n.useState(!1),[m,j]=n.useState(""),[N,f]=n.useState("member"),[v,b]=n.useState(!1),[x,d]=n.useState(null),R=async s=>{if(s.preventDefault(),!!m){b(!0);try{await S(m,N),r.success(`Invitation sent to ${m}`),j(""),f("member"),p(!1)}catch{r.error("Failed to send invitation")}finally{b(!1)}}},w=async(s,t)=>{if(s===(i==null?void 0:i.id)){r.error("You cannot remove yourself from the team");return}if(window.confirm(`Are you sure you want to remove ${t} from the team?`))try{await A(s),r.success(`${t} removed from team`)}catch{r.error("Failed to remove member")}d(null)},h=async(s,t,k)=>{if(s===(i==null?void 0:i.id)){r.error("You cannot change your own role");return}try{await F(s,t),r.success(`${k}'s role updated to ${t==="admin"?"Admin":"Member"}`)}catch{r.error("Failed to update role")}d(null)},y=s=>{const t=new Date(s);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(t)};return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6 sm:mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Team"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage team members and their roles"})]}),e.jsxs("button",{onClick:()=>p(!0),className:"flex items-center justify-center gap-2 px-6 py-3 bg-primary text-primary-foreground rounded-lg font-medium transition-all duration-200 hover:bg-primary-hover hover:scale-[1.02] w-full sm:w-auto",children:[e.jsx(z,{className:"w-5 h-5"}),"Invite Member"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[e.jsxs("div",{className:"glass-card p-4 sm:p-6 rounded-xl",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Team Members"}),e.jsx("p",{className:"text-3xl font-semibold",children:u.length})]}),e.jsxs("div",{className:"glass-card p-4 sm:p-6 rounded-xl",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Seats Used"}),e.jsxs("p",{className:"text-3xl font-semibold",children:[l==null?void 0:l.usedSeats," / ",l==null?void 0:l.seats]})]}),e.jsxs("div",{className:"glass-card p-4 sm:p-6 rounded-xl",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Available Seats"}),e.jsx("p",{className:"text-3xl font-semibold",children:((l==null?void 0:l.seats)||0)-((l==null?void 0:l.usedSeats)||0)})]})]}),e.jsx("div",{className:"hidden lg:block glass-card rounded-xl overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/30 border-b border-border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm",children:"Member"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm",children:"Role"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm",children:"Joined"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:g?e.jsx(e.Fragment,{children:[...Array(3)].map((s,t)=>e.jsxs("tr",{className:"hover:bg-muted/20 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a,{className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(a,{className:"w-32 h-4"}),e.jsx(a,{className:"w-48 h-3"})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-4 h-4 rounded"}),e.jsx(a,{className:"w-16 h-4"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(a,{className:"w-24 h-4"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(a,{className:"w-8 h-8 rounded-lg"})})]},t))}):u.map(s=>e.jsxs("tr",{className:"hover:bg-muted/20 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.avatar,alt:s.name,className:"w-10 h-10 rounded-full bg-primary/10"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.role==="admin"?e.jsx(c,{className:"w-4 h-4 text-primary"}):e.jsx(o,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:s.role==="admin"?"text-primary":"",children:s.role==="admin"?"Admin":"Member"})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-muted-foreground",children:y(s.joinedAt)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>d(x===s.id?null:s.id),className:"p-2 hover:bg-muted rounded-lg transition-colors",children:e.jsx(M,{className:"w-4 h-4"})}),x===s.id&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>d(null)}),e.jsxs("div",{className:"absolute right-0 top-full mt-1 w-48 glass-card border border-border rounded-lg shadow-lg z-20",children:[s.role==="member"&&e.jsxs("button",{onClick:()=>h(s.id,"admin",s.name),className:"w-full px-4 py-2 text-left text-sm hover:bg-muted transition-colors flex items-center gap-2 first:rounded-t-lg",children:[e.jsx(c,{className:"w-4 h-4"}),"Make Admin"]}),s.role==="admin"&&s.id!=="1"&&e.jsxs("button",{onClick:()=>h(s.id,"member",s.name),className:"w-full px-4 py-2 text-left text-sm hover:bg-muted transition-colors flex items-center gap-2 first:rounded-t-lg",children:[e.jsx(o,{className:"w-4 h-4"}),"Make Member"]}),s.id!=="1"&&e.jsxs("button",{onClick:()=>w(s.id,s.name),className:"w-full px-4 py-2 text-left text-sm text-destructive hover:bg-destructive/10 transition-colors flex items-center gap-2 last:rounded-b-lg",children:[e.jsx(C,{className:"w-4 h-4"}),"Remove"]})]})]})]})})]},s.id))})]})})}),e.jsx("div",{className:"lg:hidden space-y-4",children:g?e.jsx(e.Fragment,{children:[...Array(3)].map((s,t)=>e.jsx("div",{className:"glass-card p-4 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(a,{className:"w-12 h-12 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(a,{className:"w-32 h-4"}),e.jsx(a,{className:"w-48 h-3"}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[e.jsx(a,{className:"w-20 h-3"}),e.jsx(a,{className:"w-24 h-3"})]})]}),e.jsx(a,{className:"w-8 h-8 rounded-lg flex-shrink-0"})]})},t))}):u.map(s=>e.jsx("div",{className:"glass-card p-4 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:s.avatar,alt:s.name,className:"w-12 h-12 rounded-full bg-primary/10 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium mb-1",children:s.name}),e.jsx("div",{className:"text-sm text-muted-foreground mb-3 truncate",children:s.email}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.role==="admin"?e.jsx(c,{className:"w-4 h-4 text-primary"}):e.jsx(o,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:s.role==="admin"?"text-primary":"",children:s.role==="admin"?"Admin":"Member"})]}),e.jsx("span",{className:"text-muted-foreground",children:"•"}),e.jsx("span",{className:"text-muted-foreground",children:y(s.joinedAt)})]})]}),e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("button",{onClick:()=>d(x===s.id?null:s.id),className:"p-2 hover:bg-muted rounded-lg transition-colors",children:e.jsx(M,{className:"w-4 h-4"})}),x===s.id&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>d(null)}),e.jsxs("div",{className:"absolute right-0 top-full mt-1 w-48 glass-card border border-border rounded-lg shadow-lg z-20",children:[s.role==="member"&&e.jsxs("button",{onClick:()=>h(s.id,"admin",s.name),className:"w-full px-4 py-2 text-left text-sm hover:bg-muted transition-colors flex items-center gap-2 first:rounded-t-lg",children:[e.jsx(c,{className:"w-4 h-4"}),"Make Admin"]}),s.role==="admin"&&s.id!=="1"&&e.jsxs("button",{onClick:()=>h(s.id,"member",s.name),className:"w-full px-4 py-2 text-left text-sm hover:bg-muted transition-colors flex items-center gap-2 first:rounded-t-lg",children:[e.jsx(o,{className:"w-4 h-4"}),"Make Member"]}),s.id!=="1"&&e.jsxs("button",{onClick:()=>w(s.id,s.name),className:"w-full px-4 py-2 text-left text-sm text-destructive hover:bg-destructive/10 transition-colors flex items-center gap-2 last:rounded-b-lg",children:[e.jsx(C,{className:"w-4 h-4"}),"Remove"]})]})]})]})]})},s.id))}),e.jsxs("div",{className:"mt-6 sm:mt-8 grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"glass-card p-4 sm:p-6 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(c,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{children:"Admin"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-2",children:[e.jsx("li",{children:"• Full access to all features"}),e.jsx("li",{children:"• Manage team members"}),e.jsx("li",{children:"• Configure integrations"}),e.jsx("li",{children:"• Manage billing"})]})]}),e.jsxs("div",{className:"glass-card p-4 sm:p-6 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(o,{className:"w-5 h-5 text-muted-foreground"}),e.jsx("h3",{children:"Member"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-2",children:[e.jsx("li",{children:"• Create and view runs"}),e.jsx("li",{children:"• Access dashboard"}),e.jsx("li",{children:"• View prospects"}),e.jsx("li",{children:"• No admin capabilities"})]})]})]}),I&&e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"glass-card p-6 sm:p-8 rounded-2xl max-w-md w-full",children:[e.jsx("h2",{className:"mb-6",children:"Invite Team Member"}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block mb-2",children:"Email Address"}),e.jsx("input",{id:"email",type:"email",value:m,onChange:s=>j(s.target.value),placeholder:"colleague@example.com",className:"w-full px-4 py-2 bg-input-background border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-ring",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block mb-2",children:"Role"}),e.jsxs("select",{id:"role",value:N,onChange:s=>f(s.target.value),className:"w-full px-4 py-2 bg-input-background border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-ring",children:[e.jsx("option",{value:"member",children:"Member"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row items-center gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{p(!1),j(""),f("member")},className:"w-full sm:w-auto px-6 py-3 bg-secondary hover:bg-secondary/80 rounded-lg transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:v,className:"w-full sm:flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-primary text-primary-foreground rounded-lg font-medium transition-all duration-200 hover:bg-primary-hover hover:scale-[1.02] disabled:opacity-50",children:[e.jsx($,{className:"w-4 h-4"}),v?"Sending...":"Send Invitation"]})]})]})]})})]})}export{L as Team};
