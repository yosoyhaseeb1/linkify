import{c as ve,r as b,j as a,N as Xt,O as $e,p as ne,b as ue,a as mt,P as Yt,A as Jt,Q as Ze,u as Qt,V as Ke,q as Ce,U as Zt,g as Kt,X as et,M as er}from"./index-EQAU33AY.js";import{f as tr}from"./userDataService-CnTdgpxI.js";import{S as W}from"./skeleton-JA_CzeDa.js";import{E as rr}from"./ErrorBanner-BZpl489k.js";import{D as vt}from"./dollar-sign-CaOfg-ne.js";import{F as ke}from"./file-text-XL-PZ1e-.js";import{C as xt}from"./clock-D-2HZQBK.js";import{C as bt}from"./calendar-B-Yy3hL1.js";import{P as nr,L as yt}from"./phone-BgKa8uU3.js";import{M as He}from"./mail-DipvDLRb.js";import{H as sr}from"./hash-BtaA_Wve.js";import{P as ar}from"./plus-CsoShjA1.js";import{B as wt}from"./building-2-DtjSfEWU.js";import{E as ir}from"./external-link-H3_0ftD6.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=ve("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=ve("PoundSterling",[["path",{d:"M18 7c0-5.333-8-5.333-8 0",key:"1prm2n"}],["path",{d:"M10 7v14",key:"18tmcs"}],["path",{d:"M6 21h12",key:"4dkmi1"}],["path",{d:"M6 13h10",key:"ybwr4a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=ve("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),Dt=b.createContext({dragDropManager:void 0});function q(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var tt=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),rt=function(){return Math.random().toString(36).substring(7).split("").join(".")},nt={INIT:"@@redux/INIT"+rt(),REPLACE:"@@redux/REPLACE"+rt()};function ur(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function St(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(q(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(q(1));return r(St)(t,e)}if(typeof t!="function")throw new Error(q(2));var s=t,o=e,d=[],h=d,f=!1;function y(){h===d&&(h=d.slice())}function S(){if(f)throw new Error(q(3));return o}function O(u){if(typeof u!="function")throw new Error(q(4));if(f)throw new Error(q(5));var p=!0;return y(),h.push(u),function(){if(p){if(f)throw new Error(q(6));p=!1,y();var N=h.indexOf(u);h.splice(N,1),d=null}}}function D(u){if(!ur(u))throw new Error(q(7));if(typeof u.type>"u")throw new Error(q(8));if(f)throw new Error(q(9));try{f=!0,o=s(o,u)}finally{f=!1}for(var p=d=h,I=0;I<p.length;I++){var N=p[I];N()}return u}function v(u){if(typeof u!="function")throw new Error(q(10));s=u,D({type:nt.REPLACE})}function A(){var u,p=O;return u={subscribe:function(N){if(typeof N!="object"||N===null)throw new Error(q(11));function k(){N.next&&N.next(S())}k();var L=p(k);return{unsubscribe:L}}},u[tt]=function(){return this},u}return D({type:nt.INIT}),n={dispatch:D,subscribe:O,getState:S,replaceReducer:v},n[tt]=A,n}function j(t,e,...r){if(hr()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let s=0;n=new Error(e.replace(/%s/g,function(){return r[s++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function hr(){return typeof process<"u"&&!0}function fr(t,e,r){return e.split(".").reduce((n,s)=>n&&n[s]?n[s]:r||null,t)}function gr(t,e){return t.filter(r=>r!==e)}function Nt(t){return typeof t=="object"}function pr(t,e){const r=new Map,n=o=>{r.set(o,r.has(o)?r.get(o)+1:1)};t.forEach(n),e.forEach(n);const s=[];return r.forEach((o,d)=>{o===1&&s.push(d)}),s}function mr(t,e){return t.filter(r=>e.indexOf(r)>-1)}const Be="dnd-core/INIT_COORDS",xe="dnd-core/BEGIN_DRAG",Ue="dnd-core/PUBLISH_DRAG_SOURCE",be="dnd-core/HOVER",ye="dnd-core/DROP",we="dnd-core/END_DRAG";function st(t,e){return{type:Be,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const vr={type:Be,payload:{clientOffset:null,sourceClientOffset:null}};function xr(t){return function(r=[],n={publishSource:!0}){const{publishSource:s=!0,clientOffset:o,getSourceClientOffset:d}=n,h=t.getMonitor(),f=t.getRegistry();t.dispatch(st(o)),br(r,h,f);const y=Dr(r,h);if(y==null){t.dispatch(vr);return}let S=null;if(o){if(!d)throw new Error("getSourceClientOffset must be defined");yr(d),S=d(y)}t.dispatch(st(o,S));const D=f.getSource(y).beginDrag(h,y);if(D==null)return;wr(D),f.pinSource(y);const v=f.getSourceType(y);return{type:xe,payload:{itemType:v,item:D,sourceId:y,clientOffset:o||null,sourceClientOffset:S||null,isSourcePublic:!!s}}}}function br(t,e,r){j(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(n){j(r.getSource(n),"Expected sourceIds to be registered.")})}function yr(t){j(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function wr(t){j(Nt(t),"Item must be an object.")}function Dr(t,e){let r=null;for(let n=t.length-1;n>=0;n--)if(e.canDragSource(t[n])){r=t[n];break}return r}function Sr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Nr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){Sr(t,s,r[s])})}return t}function Tr(t){return function(r={}){const n=t.getMonitor(),s=t.getRegistry();Cr(n),Ir(n).forEach((d,h)=>{const f=jr(d,h,s,n),y={type:ye,payload:{dropResult:Nr({},r,f)}};t.dispatch(y)})}}function Cr(t){j(t.isDragging(),"Cannot call drop while not dragging."),j(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function jr(t,e,r,n){const s=r.getTarget(t);let o=s?s.drop(n,t):void 0;return Or(o),typeof o>"u"&&(o=e===0?{}:n.getDropResult()),o}function Or(t){j(typeof t>"u"||Nt(t),"Drop result must either be an object or undefined.")}function Ir(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function Er(t){return function(){const r=t.getMonitor(),n=t.getRegistry();Mr(r);const s=r.getSourceId();return s!=null&&(n.getSource(s,!0).endDrag(r,s),n.unpinSource()),{type:we}}}function Mr(t){j(t.isDragging(),"Cannot call endDrag while not dragging.")}function _e(t,e){return e===null?t===null:Array.isArray(t)?t.some(r=>r===e):t===e}function Pr(t){return function(r,{clientOffset:n}={}){kr(r);const s=r.slice(0),o=t.getMonitor(),d=t.getRegistry(),h=o.getItemType();return Rr(s,d,h),_r(s,o,d),Lr(s,o,d),{type:be,payload:{targetIds:s,clientOffset:n||null}}}}function kr(t){j(Array.isArray(t),"Expected targetIds to be an array.")}function _r(t,e,r){j(e.isDragging(),"Cannot call hover while not dragging."),j(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<t.length;n++){const s=t[n];j(t.lastIndexOf(s)===n,"Expected targetIds to be unique in the passed array.");const o=r.getTarget(s);j(o,"Expected targetIds to be registered.")}}function Rr(t,e,r){for(let n=t.length-1;n>=0;n--){const s=t[n],o=e.getTargetType(s);_e(o,r)||t.splice(n,1)}}function Lr(t,e,r){t.forEach(function(n){r.getTarget(n).hover(e,n)})}function Ar(t){return function(){if(t.getMonitor().isDragging())return{type:Ue}}}function Fr(t){return{beginDrag:xr(t),publishDragSource:Ar(t),hover:Pr(t),drop:Tr(t),endDrag:Er(t)}}class $r{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:r}=this.store;function n(o){return(...d)=>{const h=o.apply(e,d);typeof h<"u"&&r(h)}}const s=Fr(this);return Object.keys(s).reduce((o,d)=>{const h=s[d];return o[d]=n(h),o},{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}}function Hr(t,e){return{x:t.x+e.x,y:t.y+e.y}}function Tt(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Br(t){const{clientOffset:e,initialClientOffset:r,initialSourceClientOffset:n}=t;return!e||!r||!n?null:Tt(Hr(e,n),r)}function Ur(t){const{clientOffset:e,initialClientOffset:r}=t;return!e||!r?null:Tt(e,r)}const de=[],Ve=[];de.__IS_NONE__=!0;Ve.__IS_ALL__=!0;function Vr(t,e){return t===de?!1:t===Ve||typeof e>"u"?!0:mr(e,t).length>0}class qr{subscribeToStateChange(e,r={}){const{handlerIds:n}=r;j(typeof e=="function","listener must be a function."),j(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let s=this.store.getState().stateId;const o=()=>{const d=this.store.getState(),h=d.stateId;try{h===s||h===s+1&&!Vr(d.dirtyHandlerIds,n)||e()}finally{s=h}};return this.store.subscribe(o)}subscribeToOffsetChange(e){j(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const s=this.store.getState().dragOffset;s!==r&&(r=s,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;const r=this.registry.getSource(e);return j(r,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const r=this.registry.getTarget(e);if(j(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(e),s=this.getItemType();return _e(n,s)&&r.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const r=this.registry.getSource(e,!0);if(j(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(e),s=this.getItemType();return n!==s?!1:r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const s=this.registry.getTargetType(e),o=this.getItemType();if(o&&!_e(s,o))return!1;const d=this.getTargetIds();if(!d.length)return!1;const h=d.indexOf(e);return n?h===d.length-1:h>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return Br(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Ur(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}}const at=typeof global<"u"?global:self,Ct=at.MutationObserver||at.WebKitMutationObserver;function jt(t){return function(){const r=setTimeout(s,0),n=setInterval(s,50);function s(){clearTimeout(r),clearInterval(n),t()}}}function zr(t){let e=1;const r=new Ct(t),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const Gr=typeof Ct=="function"?zr:jt;class Wr{enqueueTask(e){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let n=0,s=e.length-this.index;n<s;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Gr(this.flush),this.requestErrorThrow=jt(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class Xr{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}class Yr{create(e){const r=this.freeTasks,n=r.length?r.pop():new Xr(this.onError,s=>r[r.length]=s);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const Ot=new Wr,Jr=new Yr(Ot.registerPendingError);function Qr(t){Ot.enqueueTask(Jr.create(t))}const qe="dnd-core/ADD_SOURCE",ze="dnd-core/ADD_TARGET",Ge="dnd-core/REMOVE_SOURCE",De="dnd-core/REMOVE_TARGET";function Zr(t){return{type:qe,payload:{sourceId:t}}}function Kr(t){return{type:ze,payload:{targetId:t}}}function en(t){return{type:Ge,payload:{sourceId:t}}}function tn(t){return{type:De,payload:{targetId:t}}}function rn(t){j(typeof t.canDrag=="function","Expected canDrag to be a function."),j(typeof t.beginDrag=="function","Expected beginDrag to be a function."),j(typeof t.endDrag=="function","Expected endDrag to be a function.")}function nn(t){j(typeof t.canDrop=="function","Expected canDrop to be a function."),j(typeof t.hover=="function","Expected hover to be a function."),j(typeof t.drop=="function","Expected beginDrag to be a function.")}function Re(t,e){if(e&&Array.isArray(t)){t.forEach(r=>Re(r,!1));return}j(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var z;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(z||(z={}));let sn=0;function an(){return sn++}function on(t){const e=an().toString();switch(t){case z.SOURCE:return`S${e}`;case z.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function it(t){switch(t[0]){case"S":return z.SOURCE;case"T":return z.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function ot(t,e){const r=t.entries();let n=!1;do{const{done:s,value:[,o]}=r.next();if(o===e)return!0;n=!!s}while(!n);return!1}class ln{addSource(e,r){Re(e),rn(r);const n=this.addHandler(z.SOURCE,e,r);return this.store.dispatch(Zr(n)),n}addTarget(e,r){Re(e,!0),nn(r);const n=this.addHandler(z.TARGET,e,r);return this.store.dispatch(Kr(n)),n}containsHandler(e){return ot(this.dragSources,e)||ot(this.dropTargets,e)}getSource(e,r=!1){return j(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return j(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return j(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return j(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return it(e)===z.SOURCE}isTargetId(e){return it(e)===z.TARGET}removeSource(e){j(this.getSource(e),"Expected an existing source."),this.store.dispatch(en(e)),Qr(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){j(this.getTarget(e),"Expected an existing target."),this.store.dispatch(tn(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const r=this.getSource(e);j(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){j(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,n){const s=on(e);return this.types.set(s,r),e===z.SOURCE?this.dragSources.set(s,n):e===z.TARGET&&this.dropTargets.set(s,n),s}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const cn=(t,e)=>t===e;function dn(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function un(t,e,r=cn){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!r(t[n],e[n]))return!1;return!0}function hn(t=de,e){switch(e.type){case be:break;case qe:case ze:case De:case Ge:return de;case xe:case Ue:case we:case ye:default:return Ve}const{targetIds:r=[],prevTargetIds:n=[]}=e.payload,s=pr(r,n);if(!(s.length>0||!un(r,n)))return de;const d=n[n.length-1],h=r[r.length-1];return d!==h&&(d&&s.push(d),h&&s.push(h)),s}function fn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){fn(t,s,r[s])})}return t}const lt={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function pn(t=lt,e){const{payload:r}=e;switch(e.type){case Be:case xe:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case be:return dn(t.clientOffset,r.clientOffset)?t:gn({},t,{clientOffset:r.clientOffset});case we:case ye:return lt;default:return t}}function mn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function re(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){mn(t,s,r[s])})}return t}const vn={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function xn(t=vn,e){const{payload:r}=e;switch(e.type){case xe:return re({},t,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case Ue:return re({},t,{isSourcePublic:!0});case be:return re({},t,{targetIds:r.targetIds});case De:return t.targetIds.indexOf(r.targetId)===-1?t:re({},t,{targetIds:gr(t.targetIds,r.targetId)});case ye:return re({},t,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case we:return re({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function bn(t=0,e){switch(e.type){case qe:case ze:return t+1;case Ge:case De:return t-1;default:return t}}function yn(t=0){return t+1}function wn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){wn(t,s,r[s])})}return t}function Sn(t={},e){return{dirtyHandlerIds:hn(t.dirtyHandlerIds,{type:e.type,payload:Dn({},e.payload,{prevTargetIds:fr(t,"dragOperation.targetIds",[])})}),dragOffset:pn(t.dragOffset,e),refCount:bn(t.refCount,e),dragOperation:xn(t.dragOperation,e),stateId:yn(t.stateId)}}function Nn(t,e=void 0,r={},n=!1){const s=Tn(n),o=new qr(s,new ln(s)),d=new $r(s,o),h=t(d,e,r);return d.receiveBackend(h),d}function Tn(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return St(Sn,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function Cn(t,e){if(t==null)return{};var r=jn(t,e),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function jn(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,o;for(o=0;o<n.length;o++)s=n[o],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}let ct=0;const me=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var On=b.memo(function(e){var{children:r}=e,n=Cn(e,["children"]);const[s,o]=In(n);return b.useEffect(()=>{if(o){const d=It();return++ct,()=>{--ct===0&&(d[me]=null)}}},[]),a.jsx(Dt.Provider,{value:s,children:r})});function In(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=En(t.backend,t.context,t.options,t.debugMode),r=!t.context;return[e,r]}function En(t,e=It(),r,n){const s=e;return s[me]||(s[me]={dragDropManager:Nn(t,e,r,n)}),s[me]}function It(){return typeof global<"u"?global:window}var Mn=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=n;s--!==0;){var d=o[s];if(!t(e[d],r[d]))return!1}return!0}return e!==e&&r!==r};const Pn=Xt(Mn),K=typeof window<"u"?b.useLayoutEffect:b.useEffect;function kn(t,e,r){const[n,s]=b.useState(()=>e(t)),o=b.useCallback(()=>{const d=e(t);Pn(n,d)||(s(d),r&&r())},[n,t,r]);return K(o),[n,o]}function _n(t,e,r){const[n,s]=kn(t,e,r);return K(function(){const d=t.getHandlerId();if(d!=null)return t.subscribeToStateChange(s,{handlerIds:[d]})},[t,s]),n}function Et(t,e,r){return _n(e,t||(()=>({})),()=>r.reconnect())}function Mt(t,e){const r=[];return typeof t!="function"&&r.push(t),b.useMemo(()=>typeof t=="function"?t():t,r)}function Rn(t){return b.useMemo(()=>t.hooks.dragSource(),[t])}function Ln(t){return b.useMemo(()=>t.hooks.dragPreview(),[t])}let je=!1,Oe=!1;class An{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){j(!je,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return je=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{je=!1}}isDragging(){if(!this.sourceId)return!1;j(!Oe,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Oe=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Oe=!1}}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,r){return this.internalMonitor.isOverTarget(e,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let Ie=!1;class Fn{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}canDrop(){if(!this.targetId)return!1;j(!Ie,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Ie=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Ie=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function $n(t,e,r){const n=r.getRegistry(),s=n.addTarget(t,e);return[s,()=>n.removeTarget(s)]}function Hn(t,e,r){const n=r.getRegistry(),s=n.addSource(t,e);return[s,()=>n.removeSource(s)]}function Le(t,e,r,n){let s;if(s!==void 0)return!!s;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const o=Object.keys(t),d=Object.keys(e);if(o.length!==d.length)return!1;const h=Object.prototype.hasOwnProperty.bind(e);for(let f=0;f<o.length;f++){const y=o[f];if(!h(y))return!1;const S=t[y],O=e[y];if(s=void 0,s===!1||s===void 0&&S!==O)return!1}return!0}function Ae(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Bn(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function Un(t){return(e=null,r=null)=>{if(!b.isValidElement(e)){const o=e;return t(o,r),o}const n=e;return Bn(n),Vn(n,r?o=>t(o,r):t)}}function Pt(t){const e={};return Object.keys(t).forEach(r=>{const n=t[r];if(r.endsWith("Ref"))e[r]=t[r];else{const s=Un(n);e[r]=()=>s}}),e}function dt(t,e){typeof t=="function"?t(e):t.current=e}function Vn(t,e){const r=t.ref;return j(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?b.cloneElement(t,{ref:n=>{dt(r,n),dt(e,n)}}):b.cloneElement(t,{ref:e})}class qn{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?e?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),r):(this.lastConnectedDragSource=e,r):r}reconnectDragPreview(e=!1){const r=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Le(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Le(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=Pt({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Ae(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Ae(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class zn{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Le(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=Pt({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Ae(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function se(){const{dragDropManager:t}=b.useContext(Dt);return j(t!=null,"Expected drag drop context"),t}function Gn(t,e){const r=se(),n=b.useMemo(()=>new qn(r.getBackend()),[r]);return K(()=>(n.dragSourceOptions=t||null,n.reconnect(),()=>n.disconnectDragSource()),[n,t]),K(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function Wn(){const t=se();return b.useMemo(()=>new An(t),[t])}class Xn{beginDrag(){const e=this.spec,r=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(r):n={},n??null}canDrag(){const e=this.spec,r=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(r):!0}isDragging(e,r){const n=this.spec,s=this.monitor,{isDragging:o}=n;return o?o(s):r===e.getSourceId()}endDrag(){const e=this.spec,r=this.monitor,n=this.connector,{end:s}=e;s&&s(r.getItem(),r),n.reconnect()}constructor(e,r,n){this.spec=e,this.monitor=r,this.connector=n}}function Yn(t,e,r){const n=b.useMemo(()=>new Xn(t,e,r),[e,r]);return b.useEffect(()=>{n.spec=t},[t]),n}function Jn(t){return b.useMemo(()=>{const e=t.type;return j(e!=null,"spec.type must be defined"),e},[t])}function Qn(t,e,r){const n=se(),s=Yn(t,e,r),o=Jn(t);K(function(){if(o!=null){const[h,f]=Hn(o,s,n);return e.receiveHandlerId(h),r.receiveHandlerId(h),f}},[n,e,r,s,o])}function Zn(t,e){const r=Mt(t);j(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=Wn(),s=Gn(r.options,r.previewOptions);return Qn(r,n,s),[Et(r.collect,n,s),Rn(s),Ln(s)]}function Kn(t){return b.useMemo(()=>t.hooks.dropTarget(),[t])}function es(t){const e=se(),r=b.useMemo(()=>new zn(e.getBackend()),[e]);return K(()=>(r.dropTargetOptions=t||null,r.reconnect(),()=>r.disconnectDropTarget()),[t]),r}function ts(){const t=se();return b.useMemo(()=>new Fn(t),[t])}function rs(t){const{accept:e}=t;return b.useMemo(()=>(j(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class ns{canDrop(){const e=this.spec,r=this.monitor;return e.canDrop?e.canDrop(r.getItem(),r):!0}hover(){const e=this.spec,r=this.monitor;e.hover&&e.hover(r.getItem(),r)}drop(){const e=this.spec,r=this.monitor;if(e.drop)return e.drop(r.getItem(),r)}constructor(e,r){this.spec=e,this.monitor=r}}function ss(t,e){const r=b.useMemo(()=>new ns(t,e),[e]);return b.useEffect(()=>{r.spec=t},[t]),r}function as(t,e,r){const n=se(),s=ss(t,e),o=rs(t);K(function(){const[h,f]=$n(o,s,n);return e.receiveHandlerId(h),r.receiveHandlerId(h),f},[n,e,s,r,o.map(d=>d.toString()).join("|")])}function is(t,e){const r=Mt(t),n=ts(),s=es(r.options);return as(r,n,s),[Et(r.collect,n,s),Kn(s)]}function kt(t){let e=null;return()=>(e==null&&(e=t()),e)}function os(t,e){return t.filter(r=>r!==e)}function ls(t,e){const r=new Set,n=o=>r.add(o);t.forEach(n),e.forEach(n);const s=[];return r.forEach(o=>s.push(o)),s}class cs{enter(e){const r=this.entered.length,n=s=>this.isNodeInDocument(s)&&(!s.contains||s.contains(e));return this.entered=ls(this.entered.filter(n),[e]),r===0&&this.entered.length>0}leave(e){const r=this.entered.length;return this.entered=os(this.entered.filter(this.isNodeInDocument),e),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class ds{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const s=this.config.exposeProperties[n];s!=null&&(r[n]={value:s(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const _t="__NATIVE_FILE__",Rt="__NATIVE_URL__",Lt="__NATIVE_TEXT__",At="__NATIVE_HTML__",ut=Object.freeze(Object.defineProperty({__proto__:null,FILE:_t,HTML:At,TEXT:Lt,URL:Rt},Symbol.toStringTag,{value:"Module"}));function Ee(t,e,r){const n=e.reduce((s,o)=>s||t.getData(o),"");return n??r}const Fe={[_t]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[At]:{exposeProperties:{html:(t,e)=>Ee(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[Rt]:{exposeProperties:{urls:(t,e)=>Ee(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[Lt]:{exposeProperties:{text:(t,e)=>Ee(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function us(t,e){const r=Fe[t];if(!r)throw new Error(`native type ${t} has no configuration`);const n=new ds(r);return n.loadDataTransfer(e),n}function Me(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(Fe).filter(r=>{const n=Fe[r];return n!=null&&n.matchesTypes?n.matchesTypes.some(s=>e.indexOf(s)>-1):!1})[0]||null}const hs=kt(()=>/firefox/i.test(navigator.userAgent)),Ft=kt(()=>!!window.safari);class ht{interpolate(e){const{xs:r,ys:n,c1s:s,c2s:o,c3s:d}=this;let h=r.length-1;if(e===r[h])return n[h];let f=0,y=d.length-1,S;for(;f<=y;){S=Math.floor(.5*(f+y));const v=r[S];if(v<e)f=S+1;else if(v>e)y=S-1;else return n[S]}h=Math.max(0,y);const O=e-r[h],D=O*O;return n[h]+s[h]*O+o[h]*D+d[h]*O*D}constructor(e,r){const{length:n}=e,s=[];for(let v=0;v<n;v++)s.push(v);s.sort((v,A)=>e[v]<e[A]?-1:1);const o=[],d=[];let h,f;for(let v=0;v<n-1;v++)h=e[v+1]-e[v],f=r[v+1]-r[v],o.push(h),d.push(f/h);const y=[d[0]];for(let v=0;v<o.length-1;v++){const A=d[v],u=d[v+1];if(A*u<=0)y.push(0);else{h=o[v];const p=o[v+1],I=h+p;y.push(3*I/((I+p)/A+(I+h)/u))}}y.push(d[d.length-1]);const S=[],O=[];let D;for(let v=0;v<y.length-1;v++){D=d[v];const A=y[v],u=1/o[v],p=A+y[v+1]-D-D;S.push((D-A-p)*u),O.push(p*u*u)}this.xs=e,this.ys=r,this.c1s=y,this.c2s=S,this.c3s=O}}const fs=1;function $t(t){const e=t.nodeType===fs?t:t.parentElement;if(!e)return null;const{top:r,left:n}=e.getBoundingClientRect();return{x:n,y:r}}function pe(t){return{x:t.clientX,y:t.clientY}}function gs(t){var e;return t.nodeName==="IMG"&&(hs()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function ps(t,e,r,n){let s=t?e.width:r,o=t?e.height:n;return Ft()&&t&&(o/=window.devicePixelRatio,s/=window.devicePixelRatio),{dragPreviewWidth:s,dragPreviewHeight:o}}function ms(t,e,r,n,s){const o=gs(e),h=$t(o?t:e),f={x:r.x-h.x,y:r.y-h.y},{offsetWidth:y,offsetHeight:S}=t,{anchorX:O,anchorY:D}=n,{dragPreviewWidth:v,dragPreviewHeight:A}=ps(o,e,y,S),u=()=>{let E=new ht([0,.5,1],[f.y,f.y/S*A,f.y+A-S]).interpolate(D);return Ft()&&o&&(E+=(window.devicePixelRatio-1)*A),E},p=()=>new ht([0,.5,1],[f.x,f.x/y*v,f.x+v-y]).interpolate(O),{offsetX:I,offsetY:N}=s,k=I===0||I,L=N===0||N;return{x:k?I:p(),y:L?N:u()}}class vs{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,r){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=r}}function xs(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ft(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){xs(t,s,r[s])})}return t}class bs{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,r,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,n){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,n);const s=d=>this.handleDragStart(d,e),o=d=>this.handleSelectStart(d);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",s),r.addEventListener("selectstart",o),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",s),r.removeEventListener("selectstart",o),r.setAttribute("draggable","false")}}connectDropTarget(e,r){const n=d=>this.handleDragEnter(d,e),s=d=>this.handleDragOver(d,e),o=d=>this.handleDrop(d,e);return r.addEventListener("dragenter",n),r.addEventListener("dragover",s),r.addEventListener("drop",o),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",s),r.removeEventListener("drop",o)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return ft({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(e);return ft({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(ut).some(r=>ut[r]===e)}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=us(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=s=>{const o=this.sourceNodes.get(s);return o&&$t(o)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=s=>!!(s&&this.document&&this.document.body&&this.document.body.contains(s)),this.endDragIfSourceWasRemovedFromDOM=()=>{const s=this.currentDragSourceNode;s==null||this.isNodeInDocument(s)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=s=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(s||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=s=>{if(s.defaultPrevented)return;const{dragStartSourceIds:o}=this;this.dragStartSourceIds=null;const d=pe(s);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:d});const{dataTransfer:h}=s,f=Me(h);if(this.monitor.isDragging()){if(h&&typeof h.setDragImage=="function"){const S=this.monitor.getSourceId(),O=this.sourceNodes.get(S),D=this.sourcePreviewNodes.get(S)||O;if(D){const{anchorX:v,anchorY:A,offsetX:u,offsetY:p}=this.getCurrentSourcePreviewNodeOptions(),k=ms(O,D,d,{anchorX:v,anchorY:A},{offsetX:u,offsetY:p});h.setDragImage(D,k.x,k.y)}}try{h==null||h.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(s.target);const{captureDraggingState:y}=this.getCurrentSourcePreviewNodeOptions();y?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(f)this.beginDragNativeItem(f);else{if(h&&!h.types&&(s.target&&!s.target.hasAttribute||!s.target.hasAttribute("draggable")))return;s.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=s=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(s.dataTransfer)}if(!this.enterLeaveCounter.enter(s.target)||this.monitor.isDragging())return;const{dataTransfer:h}=s,f=Me(h);f&&this.beginDragNativeItem(f,h)},this.handleTopDragEnter=s=>{const{dragEnterTargetIds:o}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=s.altKey,o.length>0&&this.actions.hover(o,{clientOffset:pe(s)}),o.some(h=>this.monitor.canDropOnTarget(h))&&(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=s=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(s.dataTransfer)}},this.handleTopDragOver=s=>{const{dragOverTargetIds:o}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none");return}this.altKeyPressed=s.altKey,this.lastClientOffset=pe(s),this.scheduleHover(o),(o||[]).some(h=>this.monitor.canDropOnTarget(h))?(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?s.preventDefault():(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=s=>{this.isDraggingNativeItem()&&s.preventDefault(),this.enterLeaveCounter.leave(s.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=s=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var o;s.preventDefault(),(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(s.dataTransfer)}else Me(s.dataTransfer)&&s.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=s=>{const{dropTargetIds:o}=this;this.dropTargetIds=[],this.actions.hover(o,{clientOffset:pe(s)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=s=>{const o=s.target;typeof o.dragDrop=="function"&&(o.tagName==="INPUT"||o.tagName==="SELECT"||o.tagName==="TEXTAREA"||o.isContentEditable||(s.preventDefault(),o.dragDrop()))},this.options=new vs(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new cs(this.isNodeInDocument)}}const ys=function(e,r,n){return new bs(e,r,n)};var We={};(function t(e,r,n,s){var o=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),d=typeof Path2D=="function"&&typeof DOMMatrix=="function",h=function(){if(!e.OffscreenCanvas)return!1;try{var l=new OffscreenCanvas(1,1),i=l.getContext("2d");i.fillRect(0,0,1,1);var x=l.transferToImageBitmap();i.createPattern(x,"no-repeat")}catch{return!1}return!0}();function f(){}function y(l){var i=r.exports.Promise,x=i!==void 0?i:e.Promise;return typeof x=="function"?new x(l):(l(f,f),null)}var S=function(l,i){return{transform:function(x){if(l)return x;if(i.has(x))return i.get(x);var w=new OffscreenCanvas(x.width,x.height),C=w.getContext("2d");return C.drawImage(x,0,0),i.set(x,w),w},clear:function(){i.clear()}}}(h,new Map),O=function(){var l=Math.floor(16.666666666666668),i,x,w={},C=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(i=function(c){var m=Math.random();return w[m]=requestAnimationFrame(function g(T){C===T||C+l-1<T?(C=T,delete w[m],c()):w[m]=requestAnimationFrame(g)}),m},x=function(c){w[c]&&cancelAnimationFrame(w[c])}):(i=function(c){return setTimeout(c,l)},x=function(c){return clearTimeout(c)}),{frame:i,cancel:x}}(),D=function(){var l,i,x={};function w(C){function c(m,g){C.postMessage({options:m||{},callback:g})}C.init=function(g){var T=g.transferControlToOffscreen();C.postMessage({canvas:T},[T])},C.fire=function(g,T,R){if(i)return c(g,null),i;var P=Math.random().toString(36).slice(2);return i=y(function(_){function F($){$.data.callback===P&&(delete x[P],C.removeEventListener("message",F),i=null,S.clear(),R(),_())}C.addEventListener("message",F),c(g,P),x[P]=F.bind(null,{data:{callback:P}})}),i},C.reset=function(){C.postMessage({reset:!0});for(var g in x)x[g](),delete x[g]}}return function(){if(l)return l;if(!n&&o){var C=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{l=new Worker(URL.createObjectURL(new Blob([C])))}catch(c){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",c),null}w(l)}return l}}(),v={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function A(l,i){return i?i(l):l}function u(l){return l!=null}function p(l,i,x){return A(l&&u(l[i])?l[i]:v[i],x)}function I(l){return l<0?0:Math.floor(l)}function N(l,i){return Math.floor(Math.random()*(i-l))+l}function k(l){return parseInt(l,16)}function L(l){return l.map(B)}function B(l){var i=String(l).replace(/[^0-9a-f]/gi,"");return i.length<6&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]),{r:k(i.substring(0,2)),g:k(i.substring(2,4)),b:k(i.substring(4,6))}}function E(l){var i=p(l,"origin",Object);return i.x=p(i,"x",Number),i.y=p(i,"y",Number),i}function Q(l){l.width=document.documentElement.clientWidth,l.height=document.documentElement.clientHeight}function V(l){var i=l.getBoundingClientRect();l.width=i.width,l.height=i.height}function he(l){var i=document.createElement("canvas");return i.style.position="fixed",i.style.top="0px",i.style.left="0px",i.style.pointerEvents="none",i.style.zIndex=l,i}function ee(l,i,x,w,C,c,m,g,T){l.save(),l.translate(i,x),l.rotate(c),l.scale(w,C),l.arc(0,0,1,m,g,T),l.restore()}function te(l){var i=l.angle*(Math.PI/180),x=l.spread*(Math.PI/180);return{x:l.x,y:l.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:l.startVelocity*.5+Math.random()*l.startVelocity,angle2D:-i+(.5*x-Math.random()*x),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:l.color,shape:l.shape,tick:0,totalTicks:l.ticks,decay:l.decay,drift:l.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:l.gravity*3,ovalScalar:.6,scalar:l.scalar,flat:l.flat}}function ae(l,i){i.x+=Math.cos(i.angle2D)*i.velocity+i.drift,i.y+=Math.sin(i.angle2D)*i.velocity+i.gravity,i.velocity*=i.decay,i.flat?(i.wobble=0,i.wobbleX=i.x+10*i.scalar,i.wobbleY=i.y+10*i.scalar,i.tiltSin=0,i.tiltCos=0,i.random=1):(i.wobble+=i.wobbleSpeed,i.wobbleX=i.x+10*i.scalar*Math.cos(i.wobble),i.wobbleY=i.y+10*i.scalar*Math.sin(i.wobble),i.tiltAngle+=.1,i.tiltSin=Math.sin(i.tiltAngle),i.tiltCos=Math.cos(i.tiltAngle),i.random=Math.random()+2);var x=i.tick++/i.totalTicks,w=i.x+i.random*i.tiltCos,C=i.y+i.random*i.tiltSin,c=i.wobbleX+i.random*i.tiltCos,m=i.wobbleY+i.random*i.tiltSin;if(l.fillStyle="rgba("+i.color.r+", "+i.color.g+", "+i.color.b+", "+(1-x)+")",l.beginPath(),d&&i.shape.type==="path"&&typeof i.shape.path=="string"&&Array.isArray(i.shape.matrix))l.fill(Ne(i.shape.path,i.shape.matrix,i.x,i.y,Math.abs(c-w)*.1,Math.abs(m-C)*.1,Math.PI/10*i.wobble));else if(i.shape.type==="bitmap"){var g=Math.PI/10*i.wobble,T=Math.abs(c-w)*.1,R=Math.abs(m-C)*.1,P=i.shape.bitmap.width*i.scalar,_=i.shape.bitmap.height*i.scalar,F=new DOMMatrix([Math.cos(g)*T,Math.sin(g)*T,-Math.sin(g)*R,Math.cos(g)*R,i.x,i.y]);F.multiplySelf(new DOMMatrix(i.shape.matrix));var $=l.createPattern(S.transform(i.shape.bitmap),"no-repeat");$.setTransform(F),l.globalAlpha=1-x,l.fillStyle=$,l.fillRect(i.x-P/2,i.y-_/2,P,_),l.globalAlpha=1}else if(i.shape==="circle")l.ellipse?l.ellipse(i.x,i.y,Math.abs(c-w)*i.ovalScalar,Math.abs(m-C)*i.ovalScalar,Math.PI/10*i.wobble,0,2*Math.PI):ee(l,i.x,i.y,Math.abs(c-w)*i.ovalScalar,Math.abs(m-C)*i.ovalScalar,Math.PI/10*i.wobble,0,2*Math.PI);else if(i.shape==="star")for(var M=Math.PI/2*3,H=4*i.scalar,U=8*i.scalar,G=i.x,Y=i.y,Z=5,X=Math.PI/Z;Z--;)G=i.x+Math.cos(M)*U,Y=i.y+Math.sin(M)*U,l.lineTo(G,Y),M+=X,G=i.x+Math.cos(M)*H,Y=i.y+Math.sin(M)*H,l.lineTo(G,Y),M+=X;else l.moveTo(Math.floor(i.x),Math.floor(i.y)),l.lineTo(Math.floor(i.wobbleX),Math.floor(C)),l.lineTo(Math.floor(c),Math.floor(m)),l.lineTo(Math.floor(w),Math.floor(i.wobbleY));return l.closePath(),l.fill(),i.tick<i.totalTicks}function Se(l,i,x,w,C){var c=i.slice(),m=l.getContext("2d"),g,T,R=y(function(P){function _(){g=T=null,m.clearRect(0,0,w.width,w.height),S.clear(),C(),P()}function F(){n&&!(w.width===s.width&&w.height===s.height)&&(w.width=l.width=s.width,w.height=l.height=s.height),!w.width&&!w.height&&(x(l),w.width=l.width,w.height=l.height),m.clearRect(0,0,w.width,w.height),c=c.filter(function($){return ae(m,$)}),c.length?g=O.frame(F):_()}g=O.frame(F),T=_});return{addFettis:function(P){return c=c.concat(P),R},canvas:l,promise:R,reset:function(){g&&O.cancel(g),T&&T()}}}function fe(l,i){var x=!l,w=!!p(i||{},"resize"),C=!1,c=p(i,"disableForReducedMotion",Boolean),m=o&&!!p(i||{},"useWorker"),g=m?D():null,T=x?Q:V,R=l&&g?!!l.__confetti_initialized:!1,P=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,_;function F(M,H,U){for(var G=p(M,"particleCount",I),Y=p(M,"angle",Number),Z=p(M,"spread",Number),X=p(M,"startVelocity",Number),Ht=p(M,"decay",Number),Bt=p(M,"gravity",Number),Ut=p(M,"drift",Number),Xe=p(M,"colors",L),Vt=p(M,"ticks",Number),Ye=p(M,"shapes"),qt=p(M,"scalar"),zt=!!p(M,"flat"),Je=E(M),Qe=G,Te=[],Gt=l.width*Je.x,Wt=l.height*Je.y;Qe--;)Te.push(te({x:Gt,y:Wt,angle:Y,spread:Z,startVelocity:X,color:Xe[Qe%Xe.length],shape:Ye[N(0,Ye.length)],ticks:Vt,decay:Ht,gravity:Bt,drift:Ut,scalar:qt,flat:zt}));return _?_.addFettis(Te):(_=Se(l,Te,T,H,U),_.promise)}function $(M){var H=c||p(M,"disableForReducedMotion",Boolean),U=p(M,"zIndex",Number);if(H&&P)return y(function(X){X()});x&&_?l=_.canvas:x&&!l&&(l=he(U),document.body.appendChild(l)),w&&!R&&T(l);var G={width:l.width,height:l.height};g&&!R&&g.init(l),R=!0,g&&(l.__confetti_initialized=!0);function Y(){if(g){var X={getBoundingClientRect:function(){if(!x)return l.getBoundingClientRect()}};T(X),g.postMessage({resize:{width:X.width,height:X.height}});return}G.width=G.height=null}function Z(){_=null,w&&(C=!1,e.removeEventListener("resize",Y)),x&&l&&(document.body.contains(l)&&document.body.removeChild(l),l=null,R=!1)}return w&&!C&&(C=!0,e.addEventListener("resize",Y,!1)),g?g.fire(M,G,Z):F(M,G,Z)}return $.reset=function(){g&&g.reset(),_&&_.reset()},$}var ie;function oe(){return ie||(ie=fe(null,{useWorker:!0,resize:!0})),ie}function Ne(l,i,x,w,C,c,m){var g=new Path2D(l),T=new Path2D;T.addPath(g,new DOMMatrix(i));var R=new Path2D;return R.addPath(T,new DOMMatrix([Math.cos(m)*C,Math.sin(m)*C,-Math.sin(m)*c,Math.cos(m)*c,x,w])),R}function le(l){if(!d)throw new Error("path confetti are not supported in this browser");var i,x;typeof l=="string"?i=l:(i=l.path,x=l.matrix);var w=new Path2D(i),C=document.createElement("canvas"),c=C.getContext("2d");if(!x){for(var m=1e3,g=m,T=m,R=0,P=0,_,F,$=0;$<m;$+=2)for(var M=0;M<m;M+=2)c.isPointInPath(w,$,M,"nonzero")&&(g=Math.min(g,$),T=Math.min(T,M),R=Math.max(R,$),P=Math.max(P,M));_=R-g,F=P-T;var H=10,U=Math.min(H/_,H/F);x=[U,0,0,U,-Math.round(_/2+g)*U,-Math.round(F/2+T)*U]}return{type:"path",path:i,matrix:x}}function ge(l){var i,x=1,w="#000000",C='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof l=="string"?i=l:(i=l.text,x="scalar"in l?l.scalar:x,C="fontFamily"in l?l.fontFamily:C,w="color"in l?l.color:w);var c=10*x,m=""+c+"px "+C,g=new OffscreenCanvas(c,c),T=g.getContext("2d");T.font=m;var R=T.measureText(i),P=Math.ceil(R.actualBoundingBoxRight+R.actualBoundingBoxLeft),_=Math.ceil(R.actualBoundingBoxAscent+R.actualBoundingBoxDescent),F=2,$=R.actualBoundingBoxLeft+F,M=R.actualBoundingBoxAscent+F;P+=F+F,_+=F+F,g=new OffscreenCanvas(P,_),T=g.getContext("2d"),T.font=m,T.fillStyle=w,T.fillText(i,$,M);var H=1/x;return{type:"bitmap",bitmap:g.transferToImageBitmap(),matrix:[H,0,0,H,-P*H/2,-_*H/2]}}r.exports=function(){return oe().apply(this,arguments)},r.exports.reset=function(){oe().reset()},r.exports.create=fe,r.exports.shapeFromPath=le,r.exports.shapeFromText=ge})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),We,!1);const Pe=We.exports;We.exports.create;const gt=[{code:"USD",symbol:"$",icon:vt},{code:"EUR",symbol:"",icon:lr},{code:"GBP",symbol:"",icon:cr}];function ws({prospectId:t,initialValue:e=0,initialCurrency:r="USD",onUpdate:n,compact:s=!1}){var k;const{getToken:o}=$e(),[d,h]=b.useState(e.toString()),[f,y]=b.useState(r),[S,O]=b.useState(!1),[D,v]=b.useState(!1),[A,u]=b.useState(!1);b.useEffect(()=>{h(e.toString()),y(r)},[e,r]);const p=async()=>{const L=parseFloat(d)||0;O(!0);try{const B=await o();(await fetch(`https://${ne}.supabase.co/functions/v1/make-server-0d5eb2a5/prospects/${t}/deal`,{method:"PATCH",headers:{Authorization:`Bearer ${ue}`,"x-clerk-token":B||"","Content-Type":"application/json"},body:JSON.stringify({dealValue:L,currency:f})})).ok&&(v(!0),setTimeout(()=>v(!1),2e3),n==null||n(L,f))}catch(B){console.error("Error saving deal value:",B)}finally{O(!1)}},I=()=>{((parseFloat(d)||0)!==e||f!==r)&&p()},N=((k=gt.find(L=>L.code===f))==null?void 0:k.icon)||vt;return s?a.jsxs("div",{className:"inline-flex items-center gap-1 text-green-400 font-medium",children:[a.jsx(N,{className:"w-4 h-4"}),a.jsx("span",{children:parseFloat(d).toLocaleString()||"0"})]}):a.jsxs("div",{className:"relative",children:[a.jsx("label",{className:"block text-white/60 text-xs mb-1",children:"Deal Value"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>u(!A),className:"flex items-center gap-1 px-2 py-2 bg-white/5 border border-white/10 rounded-lg text-white hover:bg-white/10 transition-colors",children:[a.jsx(N,{className:"w-4 h-4"}),a.jsx("span",{className:"text-xs",children:f})]}),A&&a.jsx("div",{className:"absolute top-full left-0 mt-1 bg-gray-900 border border-white/10 rounded-lg shadow-xl z-10 overflow-hidden",children:gt.map(L=>a.jsxs("button",{onClick:()=>{y(L.code),u(!1)},className:`flex items-center gap-2 w-full px-3 py-2 text-left hover:bg-white/10 transition-colors ${f===L.code?"bg-cyan-500/20 text-cyan-400":"text-white"}`,children:[a.jsx(L.icon,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:L.code})]},L.code))})]}),a.jsxs("div",{className:"relative flex-1",children:[a.jsx("input",{type:"number",value:d,onChange:L=>h(L.target.value),onBlur:I,placeholder:"0",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 text-sm focus:outline-none focus:border-cyan-500/50 pr-8"}),S&&a.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:a.jsx("div",{className:"w-4 h-4 border-2 border-cyan-500 border-t-transparent rounded-full animate-spin"})}),D&&a.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-green-400",children:a.jsx(or,{className:"w-4 h-4"})})]})]})]})}const Ds={stage_change:a.jsx(Jt,{className:"w-4 h-4"}),note_added:a.jsx(ke,{className:"w-4 h-4"}),message_sent:a.jsx(He,{className:"w-4 h-4"}),reply_received:a.jsx(Yt,{className:"w-4 h-4"}),call_logged:a.jsx(nr,{className:"w-4 h-4"}),meeting_scheduled:a.jsx(bt,{className:"w-4 h-4"}),deal_updated:a.jsx("span",{className:"text-sm",children:""}),field_updated:a.jsx(ke,{className:"w-4 h-4"})},pt={stage_change:"bg-blue-500/20 text-blue-400 border-blue-500/30",note_added:"bg-gray-500/20 text-gray-400 border-gray-500/30",message_sent:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30",reply_received:"bg-green-500/20 text-green-400 border-green-500/30",call_logged:"bg-purple-500/20 text-purple-400 border-purple-500/30",meeting_scheduled:"bg-orange-500/20 text-orange-400 border-orange-500/30",deal_updated:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",field_updated:"bg-gray-500/20 text-gray-400 border-gray-500/30"};function Ss({prospectId:t,onActivityAdded:e}){const{getToken:r}=$e(),{currentOrg:n}=mt(),[s,o]=b.useState([]),[d,h]=b.useState(!0),[f,y]=b.useState(""),[S,O]=b.useState(!1);b.useEffect(()=>{n!=null&&n.id?D():h(!1)},[t,n==null?void 0:n.id]);const D=async()=>{if(!(n!=null&&n.id)){h(!1);return}try{const u=await r(),p=await fetch(`https://${ne}.supabase.co/functions/v1/make-server-0d5eb2a5/activities/${t}`,{headers:{Authorization:`Bearer ${ue}`,"x-clerk-token":u||""}});if(p.ok){const I=await p.json();o(I.activities||[])}}catch(u){console.error("Error loading activities:",u)}finally{h(!1)}},v=async()=>{if(!(!f.trim()||!(n!=null&&n.id))){O(!0);try{const u=await r();(await fetch(`https://${ne}.supabase.co/functions/v1/make-server-0d5eb2a5/activities`,{method:"POST",headers:{Authorization:`Bearer ${ue}`,"x-clerk-token":u||"","Content-Type":"application/json"},body:JSON.stringify({prospectId:t,activityType:"note_added",title:"Note added",description:f})})).ok&&(y(""),D(),e==null||e())}catch(u){console.error("Error adding note:",u)}finally{O(!1)}}},A=u=>{const p=new Date(u),N=new Date().getTime()-p.getTime(),k=Math.floor(N/6e4),L=Math.floor(N/36e5),B=Math.floor(N/864e5);return k<1?"Just now":k<60?`${k}m ago`:L<24?`${L}h ago`:B<7?`${B}d ago`:p.toLocaleDateString()};return d?a.jsx("div",{className:"space-y-3",children:[1,2,3].map(u=>a.jsxs("div",{className:"animate-pulse flex gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-white/10 rounded-full"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-white/10 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-white/10 rounded w-1/2"})]})]},u))}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:f,onChange:u=>y(u.target.value),onKeyDown:u=>u.key==="Enter"&&v(),placeholder:"Add a note...",className:"flex-1 px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 text-sm focus:outline-none focus:border-cyan-500/50"}),a.jsx("button",{onClick:v,disabled:S||!f.trim(),className:"px-4 py-2 bg-cyan-500 text-black rounded-lg text-sm font-medium hover:bg-cyan-400 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:S?"...":"Add"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-px bg-white/10"}),a.jsx("div",{className:"space-y-4",children:s.length===0?a.jsx("p",{className:"text-white/40 text-sm pl-10",children:"No activity yet"}):s.map(u=>a.jsxs("div",{className:"relative flex gap-3 pl-1",children:[a.jsx("div",{className:`relative z-10 w-8 h-8 rounded-full flex items-center justify-center border ${pt[u.activity_type]||pt.note_added}`,children:Ds[u.activity_type]||a.jsx(ke,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-white text-sm font-medium",children:u.title}),a.jsxs("span",{className:"text-white/40 text-xs flex items-center gap-1",children:[a.jsx(xt,{className:"w-3 h-3"}),A(u.created_at)]})]}),u.description&&a.jsx("p",{className:"text-white/60 text-sm mt-1",children:u.description})]})]},u.id))})]})]})}function Ns({prospectId:t,onFieldUpdate:e}){const{getToken:r}=$e(),{currentOrg:n}=mt(),[s,o]=b.useState([]),[d,h]=b.useState({}),[f,y]=b.useState(!0),[S,O]=b.useState(null);b.useEffect(()=>{n!=null&&n.id&&D()},[n==null?void 0:n.id,t]);const D=async()=>{if(!(n!=null&&n.id)){y(!1);return}try{const u=await r(),p={Authorization:`Bearer ${ue}`,"x-clerk-token":u||""},I=await fetch(`https://${ne}.supabase.co/functions/v1/make-server-0d5eb2a5/custom-fields/${n.id}`,{headers:p}),N=await fetch(`https://${ne}.supabase.co/functions/v1/make-server-0d5eb2a5/custom-fields/${n.id}/values/${t}`,{headers:p});if(I.ok){const k=await I.json();o(k.fields||[])}if(N.ok){const k=await N.json(),L={};(k.values||[]).forEach(B=>{L[B.field_id]=B.value}),h(L)}}catch(u){console.error("Error loading custom fields:",u)}finally{y(!1)}},v=async(u,p)=>{if(n!=null&&n.id){O(u);try{const I=await r();(await fetch(`https://${ne}.supabase.co/functions/v1/make-server-0d5eb2a5/custom-fields/${n.id}/values/${t}`,{method:"PUT",headers:{Authorization:`Bearer ${ue}`,"x-clerk-token":I||"","Content-Type":"application/json"},body:JSON.stringify({fieldId:u,value:p})})).ok&&(h(k=>({...k,[u]:p})),e==null||e())}catch(I){console.error("Error saving field value:",I)}finally{O(null)}}},A=u=>{const p=d[u.id]||"";u.id;const I="w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 text-sm focus:outline-none focus:border-cyan-500/50";switch(u.field_type){case"select":return a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:p,onChange:N=>v(u.id,N.target.value),className:`${I} appearance-none pr-8`,children:[a.jsx("option",{value:"",children:"Select..."}),u.options.map(N=>a.jsx("option",{value:N,children:N},N))]}),a.jsx(Ze,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-white/40 pointer-events-none"})]});case"date":return a.jsx("input",{type:"date",value:p,onChange:N=>v(u.id,N.target.value),className:I});case"number":case"currency":return a.jsxs("div",{className:"relative",children:[u.field_type==="currency"&&a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/40",children:"$"}),a.jsx("input",{type:"number",value:p,onChange:N=>h(k=>({...k,[u.id]:N.target.value})),onBlur:N=>v(u.id,N.target.value),placeholder:"0",className:`${I} ${u.field_type==="currency"?"pl-7":""}`})]});default:return a.jsx("input",{type:"text",value:p,onChange:N=>h(k=>({...k,[u.id]:N.target.value})),onBlur:N=>v(u.id,N.target.value),placeholder:`Enter ${u.field_label.toLowerCase()}...`,className:I})}};return f?a.jsx("div",{className:"space-y-3",children:[1,2,3].map(u=>a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-3 bg-white/10 rounded w-1/4 mb-2"}),a.jsx("div",{className:"h-10 bg-white/10 rounded"})]},u))}):s.length===0?a.jsx("div",{className:"text-center py-6 text-white/40",children:a.jsx("p",{className:"text-sm",children:"No custom fields defined"})}):a.jsx("div",{className:"space-y-4",children:s.map(u=>a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 text-white/60 text-xs mb-1",children:[u.field_type==="text"&&a.jsx(dr,{className:"w-3 h-3"}),u.field_type==="number"&&a.jsx(sr,{className:"w-3 h-3"}),u.field_type==="currency"&&a.jsx("span",{className:"text-xs",children:""}),u.field_type==="date"&&a.jsx(bt,{className:"w-3 h-3"}),u.field_type==="select"&&a.jsx(Ze,{className:"w-3 h-3"}),u.field_label,u.is_required&&a.jsx("span",{className:"text-red-400",children:"*"}),S===u.id&&a.jsx("span",{className:"ml-auto text-cyan-400 text-xs",children:"Saving..."})]}),A(u)]},u.id))})}const J=[{id:"conversation_started",label:"Conversation Started",color:"bg-blue-500/20",textColor:"text-blue-500"},{id:"qualification",label:"Qualification",color:"bg-purple-500/20",textColor:"text-purple-500"},{id:"proposal_sent",label:"Proposal Sent",color:"bg-orange-500/20",textColor:"text-orange-500"},{id:"signed_mandate",label:"Signed Mandate",color:"bg-emerald-500/20",textColor:"text-emerald-500"},{id:"lost",label:"Lost / Not a Fit",color:"bg-gray-500/20",textColor:"text-gray-500"}];function Ts({prospect:t,onViewDetails:e,isUpdating:r=!1}){const[{isDragging:n},s]=Zn(()=>({type:"prospect",item:{id:t.id,stage:t.stage},collect:o=>({isDragging:o.isDragging()})}));return a.jsxs("div",{ref:s,className:`bg-card border border-border rounded-lg p-3 cursor-move hover:shadow-lg transition-all relative ${n?"opacity-50":""}`,children:[r&&a.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center rounded-lg z-10",children:a.jsx(er,{className:"w-5 h-5 text-primary animate-spin"})}),a.jsx("div",{className:"flex items-start justify-between mb-2",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-sm font-medium truncate mb-1",children:t.name}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.title})]})}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mb-2",children:[a.jsx(wt,{className:"w-3 h-3 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:t.company})]}),t.job_title&&a.jsxs("div",{className:"text-xs text-muted-foreground mb-2 truncate",children:["Role: ",t.job_title]}),t.deal_value&&a.jsx("div",{className:"text-xs font-medium text-green-500 mb-2",children:t.deal_value}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mb-3",children:[a.jsx(xt,{className:"w-3 h-3 flex-shrink-0"}),a.jsx("span",{children:new Date(t.last_activity_at).toLocaleDateString()})]}),a.jsxs("div",{className:"flex items-center gap-1 pt-2 border-t border-border",children:[a.jsx("button",{onClick:()=>e(t),className:"flex-1 px-2 py-1.5 bg-primary text-primary-foreground rounded text-xs hover:bg-primary-hover transition-colors",children:"View"}),a.jsx("a",{href:t.linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 hover:bg-accent rounded transition-colors",onClick:o=>o.stopPropagation(),children:a.jsx(yt,{className:"w-3.5 h-3.5 text-muted-foreground"})}),a.jsx("a",{href:`mailto:${t.email}`,className:"p-1.5 hover:bg-accent rounded transition-colors",onClick:o=>o.stopPropagation(),children:a.jsx(He,{className:"w-3.5 h-3.5 text-muted-foreground"})})]})]})}function Cs({stage:t,prospects:e,onDrop:r,onViewDetails:n,updatingProspectId:s}){const[{isOver:o},d]=is(()=>({accept:"prospect",drop:f=>{f.stage!==t.id&&r(f.id,t.id)},collect:f=>({isOver:f.isOver()})})),h=e.reduce((f,y)=>{var O;const S=parseFloat(((O=y.deal_value)==null?void 0:O.replace(/[,]/g,""))||"0");return f+S},0);return a.jsxs("div",{className:"flex-1 min-w-[252px] flex flex-col h-full",children:[a.jsxs("div",{className:`glass-card rounded-t-lg p-3 ${t.color} border-b border-border flex-shrink-0`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("h3",{className:`text-sm font-medium ${t.textColor}`,children:t.label}),a.jsx("span",{className:`text-xs ${t.textColor}`,children:e.length})]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["",h.toLocaleString()]})]}),a.jsxs("div",{ref:d,className:`glass-card rounded-b-lg border-t-0 p-3 space-y-3 transition-colors overflow-y-auto flex-1 ${o?"bg-accent/50":""}`,children:[e.map(f=>a.jsx(Ts,{prospect:f,onViewDetails:n,isUpdating:s===f.id},f.id)),e.length===0&&a.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No deals in this stage"})]})]})}function Bs(){var i,x,w,C;const{user:t,getToken:e}=Qt(),[r,n]=b.useState(""),[s,o]=b.useState("all"),[d,h]=b.useState(!1),[f,y]=b.useState("activity"),[S,O]=b.useState([]),[D,v]=b.useState(null),[A,u]=b.useState(!0),[p,I]=b.useState(!1),[N,k]=b.useState(!1),[L,B]=b.useState(!1),[E,Q]=b.useState({name:"",title:"",company:"",email:"",linkedin_url:"",job_title:"",deal_value:"",notes:""}),[V,he]=b.useState({name:"",title:"",company:"",email:""}),ee=(c,m)=>{Q(g=>({...g,[c]:m}))},te=c=>{const m=ce(c,E[c]);he(g=>({...g,[c]:m}))},ae=async()=>{if(!(t!=null&&t.id)){u(!1),O([]);return}u(!0),I(!1),k(!1);try{const c=await e();if(!c){console.error("Failed to get authentication token"),I(!0),u(!1);return}const g=((await tr(t.id,c)).contacts||[]).filter(T=>T.stage);O(g),console.log(` Loaded ${g.length} pipeline prospects for user ${t.id}`)}catch(c){console.error("Error loading pipeline:",c),I(!0)}finally{u(!1)}};b.useEffect(()=>{ae()},[t==null?void 0:t.id,e]),b.useEffect(()=>{const c=()=>{!document.hidden&&(t!=null&&t.id)&&ae()};return document.addEventListener("visibilitychange",c),()=>{document.removeEventListener("visibilitychange",c)}},[t==null?void 0:t.id]);const Se=()=>{k(!0),ae()},fe=(c,m)=>{const g=S.find(P=>P.id===c);if(!g)return;const T=J.findIndex(P=>P.id===g.stage),R=J.findIndex(P=>P.id===m);if(O(P=>P.map(_=>_.id===c?{..._,stage:m,last_activity_at:new Date().toISOString()}:_)),m==="signed_mandate"){let P=function(H,U){return Math.random()*(U-H)+H};const F=Date.now()+3e3,$={startVelocity:30,spread:360,ticks:60,zIndex:9999},M=setInterval(function(){const H=F-Date.now();if(H<=0)return clearInterval(M);const U=50*(H/3e3);Pe({...$,particleCount:U,origin:{x:P(.1,.3),y:Math.random()-.2}}),Pe({...$,particleCount:U,origin:{x:P(.7,.9),y:Math.random()-.2}})},250)}else R>T&&m!=="lost"&&Pe({particleCount:100,spread:70,origin:{y:.6},zIndex:9999})},ie=S.filter(c=>c.name.toLowerCase().includes(r.toLowerCase())||c.company.toLowerCase().includes(r.toLowerCase())||c.title.toLowerCase().includes(r.toLowerCase())),oe=J.reduce((c,m)=>(c[m.id]=ie.filter(g=>g.stage===m.id),c),{}),Ne=()=>{const c={name:ce("name",E.name),title:ce("title",E.title),company:ce("company",E.company),email:ce("email",E.email)};if(Object.values(c).some(g=>g!=="")){he(c);return}const m={id:String(Date.now()),name:E.name,title:E.title,company:E.company,email:E.email,linkedin_url:E.linkedin_url,job_title:E.job_title,deal_value:E.deal_value,notes:E.notes,stage:"conversation_started",run_id:"manual",organization_id:"org1",last_activity_at:new Date().toISOString()};O([...S,m]),B(!1),Q({name:"",title:"",company:"",email:"",linkedin_url:"",job_title:"",deal_value:"",notes:""})},le=S.length,ge=S.reduce((c,m)=>{var T;const g=parseFloat(((T=m.deal_value)==null?void 0:T.replace(/[,]/g,""))||"0");return c+g},0),l=le>0?ge/le:0;return a.jsxs(On,{backend:ys,children:[a.jsx(Ke,{}),a.jsxs("div",{className:"h-screen flex flex-col relative z-10",children:[a.jsxs("div",{className:"sticky top-0 z-10 flex-shrink-0 p-6 space-y-3 bg-background/80 backdrop-blur-md border-b border-border/50 shadow-lg relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:a.jsx(Ke,{})}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("h1",{className:"mb-1",children:"Pipeline"}),a.jsx("p",{className:"text-muted-foreground text-sm",children:"Manage your deals with drag-and-drop pipeline view"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 relative z-10",children:[a.jsx("div",{className:"glass-card rounded-lg p-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Ce,{className:"w-3.5 h-3.5 text-blue-500"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Total Deals"})]}),a.jsx("div",{className:"text-lg",children:le})]})}),a.jsx("div",{className:"glass-card rounded-lg p-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Ce,{className:"w-3.5 h-3.5 text-green-500"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Total Value"})]}),a.jsxs("div",{className:"text-lg",children:["",ge.toLocaleString()]})]})}),a.jsx("div",{className:"glass-card rounded-lg p-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Ce,{className:"w-3.5 h-3.5 text-purple-500"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Avg Deal Value"})]}),a.jsxs("div",{className:"text-lg",children:["",Math.round(l).toLocaleString()]})]})}),a.jsx("div",{className:"glass-card rounded-lg p-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Zt,{className:"w-3.5 h-3.5 text-orange-500"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Active Stages"})]}),a.jsx("div",{className:"text-lg",children:Object.values(oe).filter(c=>c.length>0).length})]})})]}),a.jsx("div",{className:"glass-card rounded-lg p-3 relative z-10",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(Kt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),a.jsx("input",{type:"text",placeholder:"Search deals...",value:r,onChange:c=>n(c.target.value),className:"w-full pl-10 pr-4 py-2 bg-muted border border-border rounded-lg focus:border-primary focus:outline-none text-sm"})]}),a.jsxs("button",{onClick:()=>B(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary-hover transition-colors text-sm",children:[a.jsx(ar,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Deal"})]})]})})]}),a.jsx("div",{className:"flex-1 min-h-0 overflow-x-auto overflow-y-hidden px-6 pb-6",children:A?a.jsx("div",{className:"flex gap-3 h-full min-h-full",children:J.map(c=>a.jsxs("div",{className:"flex-1 min-w-[252px] flex flex-col h-full",children:[a.jsxs("div",{className:`glass-card rounded-t-lg p-3 ${c.color} border-b border-border flex-shrink-0`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx(W,{className:"w-32 h-4"}),a.jsx(W,{className:"w-6 h-4"})]}),a.jsx(W,{className:"w-16 h-3"})]}),a.jsx("div",{className:"glass-card rounded-b-lg border-t-0 p-3 space-y-3 overflow-y-auto flex-1",children:[...Array(3)].map((m,g)=>a.jsxs("div",{className:"bg-card border border-border rounded-lg p-3",children:[a.jsx(W,{className:"w-3/4 h-4 mb-2"}),a.jsx(W,{className:"w-1/2 h-3 mb-3"}),a.jsx(W,{className:"w-full h-3 mb-2"}),a.jsx(W,{className:"w-2/3 h-3 mb-2"}),a.jsx(W,{className:"w-16 h-3 mb-3"}),a.jsxs("div",{className:"flex items-center gap-1 pt-2 border-t border-border",children:[a.jsx(W,{className:"flex-1 h-7 rounded"}),a.jsx(W,{className:"w-7 h-7 rounded"}),a.jsx(W,{className:"w-7 h-7 rounded"})]})]},g))})]},c.id))}):p?a.jsxs("div",{className:"pt-6",children:[a.jsx(rr,{message:"Failed to load pipeline. Please try again.",onRetry:Se,isRetrying:N}),a.jsx("div",{className:"opacity-30 pointer-events-none",children:a.jsx("div",{className:"flex gap-3 h-full min-h-full",children:J.map(c=>a.jsxs("div",{className:"flex-1 min-w-[252px] flex flex-col h-full",children:[a.jsxs("div",{className:`glass-card rounded-t-lg p-3 ${c.color} border-b border-border flex-shrink-0`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("h3",{className:`text-sm font-medium ${c.textColor}`,children:c.label}),a.jsx("span",{className:`text-xs ${c.textColor}`,children:"0"})]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"0"})]}),a.jsx("div",{className:"glass-card rounded-b-lg border-t-0 p-3 space-y-3 overflow-y-auto flex-1",children:a.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No deals in this stage"})})]},c.id))})})]}):a.jsx("div",{className:"flex gap-3 h-full min-h-full",children:J.map(c=>a.jsx(Cs,{stage:c,prospects:oe[c.id],onDrop:fe,onViewDetails:v},c.id))})}),D&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>v(null),children:a.jsxs("div",{className:"glass-card rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:c=>c.stopPropagation(),children:[a.jsx("div",{className:"p-6 border-b border-border",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h2",{className:"mb-0",children:D.name}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${((i=J.find(c=>c.id===D.stage))==null?void 0:i.color)||"bg-gray-500/20"} ${((x=J.find(c=>c.id===D.stage))==null?void 0:x.textColor)||"text-gray-500"}`,children:(w=J.find(c=>c.id===D.stage))==null?void 0:w.label})]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:D.title}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(wt,{className:"w-4 h-4"}),a.jsx("span",{children:D.company})]})]}),a.jsx("button",{onClick:()=>v(null),className:"p-2 hover:bg-accent rounded-lg transition-colors",children:a.jsx(et,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[a.jsxs("div",{className:"glass-card rounded-xl p-4",children:[a.jsx("h3",{className:"text-sm mb-3 font-medium",children:"Contact Information"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("a",{href:`mailto:${D.email}`,className:"flex items-center gap-2 text-sm hover:text-primary transition-colors",children:[a.jsx(He,{className:"w-4 h-4"}),a.jsx("span",{children:D.email})]}),a.jsxs("a",{href:D.linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-primary hover:text-primary-hover transition-colors",children:[a.jsx(yt,{className:"w-4 h-4"}),a.jsx("span",{children:"LinkedIn Profile"}),a.jsx(ir,{className:"w-3 h-3"})]})]})]}),a.jsxs("div",{className:"glass-card rounded-xl p-4",children:[a.jsx("h3",{className:"text-sm mb-3 font-medium flex items-center gap-2",children:" Deal Information"}),a.jsx(ws,{prospectId:D.id,initialValue:parseFloat(((C=D.deal_value)==null?void 0:C.replace(/[$,]/g,""))||"0"),initialCurrency:"EUR",onUpdate:(c,m)=>{console.log("Deal updated:",c,m)}})]}),a.jsxs("div",{className:"glass-card rounded-xl p-4",children:[a.jsx("h3",{className:"text-sm mb-3 font-medium flex items-center gap-2",children:" Custom Fields"}),a.jsx(Ns,{prospectId:D.id,onFieldUpdate:()=>{console.log("Field updated")}})]}),D.notes&&a.jsxs("div",{className:"glass-card rounded-xl p-4",children:[a.jsx("h3",{className:"text-sm mb-2 font-medium",children:"Notes"}),a.jsx("div",{className:"p-3 bg-muted/30 rounded-lg text-sm text-muted-foreground",children:D.notes})]}),a.jsxs("div",{className:"glass-card rounded-xl p-4",children:[a.jsx("h3",{className:"text-sm mb-3 font-medium flex items-center gap-2",children:" Activity Timeline"}),a.jsx(Ss,{prospectId:D.id,onActivityAdded:()=>{console.log("Activity added")}})]})]})]})}),L&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>B(!1),children:a.jsxs("div",{className:"glass-card rounded-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:c=>c.stopPropagation(),children:[a.jsx("div",{className:"p-6 border-b border-border",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"mb-2",children:"Add New Deal"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Manually add a new deal to your pipeline"})]}),a.jsx("button",{onClick:()=>B(!1),className:"p-2 hover:bg-accent rounded-lg transition-colors",children:a.jsx(et,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-muted-foreground mb-2 block",children:"Contact Name *"}),a.jsx("input",{type:"text",value:E.name,onChange:c=>ee("name",c.target.value),onBlur:()=>te("name"),className:`w-full px-3 py-2 bg-muted border border-border rounded-lg focus:border-primary focus:outline-none text-sm ${V.name?"border-red-500":""}`,placeholder:"e.g., John Smith"}),V.name&&a.jsx("p",{className:"text-xs text-red-500 mt-1",children:V.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-muted-foreground mb-2 block",children:"Job Title *"}),a.jsx("input",{type:"text",value:E.title,onChange:c=>ee("title",c.target.value),onBlur:()=>te("title"),className:`w-full px-3 py-2 bg-muted border border-border rounded-lg focus:border-primary focus:outline-none text-sm ${V.title?"border-red-500":""}`,placeholder:"e.g., VP Engineering"}),V.title&&a.jsx("p",{className:"text-xs text-red-500 mt-1",children:V.title})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-muted-foreground mb-2 block",children:"Company *"}),a.jsx("input",{type:"text",value:E.company,onChange:c=>ee("company",c.target.value),onBlur:()=>te("company"),className:`w-full px-3 py-2 bg-muted border border-border rounded-lg focus:border-primary focus:outline-none text-sm ${V.company?"border-red-500":""}`,placeholder:"e.g., TechCorp Inc"}),V.company&&a.jsx("p",{className:"text-xs text-red-500 mt-1",children:V.company})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-muted-foreground mb-2 block",children:"Email *"}),a.jsx("input",{type:"email",value:E.email,onChange:c=>ee("email",c.target.value),onBlur:()=>te("email"),className:`w-full px-3 py-2 bg-muted border border-border rounded-lg focus:border-primary focus:outline-none text-sm ${V.email?"border-red-500":""}`,placeholder:"e.g., john@techcorp.com"}),V.email&&a.jsx("p",{className:"text-xs text-red-500 mt-1",children:V.email})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-muted-foreground mb-2 block",children:"LinkedIn URL"}),a.jsx("input",{type:"url",value:E.linkedin_url,onChange:c=>Q({...E,linkedin_url:c.target.value}),className:"w-full px-3 py-2 bg-muted border border-border rounded-lg focus:border-primary focus:outline-none text-sm",placeholder:"https://linkedin.com/in/..."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-muted-foreground mb-2 block",children:"Position/Role"}),a.jsx("input",{type:"text",value:E.job_title,onChange:c=>Q({...E,job_title:c.target.value}),className:"w-full px-3 py-2 bg-muted border border-border rounded-lg focus:border-primary focus:outline-none text-sm",placeholder:"e.g., Senior Engineer"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-muted-foreground mb-2 block",children:"Deal Value"}),a.jsx("input",{type:"text",value:E.deal_value,onChange:c=>Q({...E,deal_value:c.target.value}),className:"w-full px-3 py-2 bg-muted border border-border rounded-lg focus:border-primary focus:outline-none text-sm",placeholder:"e.g., 15,000"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-muted-foreground mb-2 block",children:"Notes"}),a.jsx("textarea",{value:E.notes,onChange:c=>Q({...E,notes:c.target.value}),className:"w-full px-3 py-2 bg-muted border border-border rounded-lg focus:border-primary focus:outline-none text-sm resize-none",rows:3,placeholder:"Add any relevant notes..."})]})]}),a.jsxs("div",{className:"p-6 border-t border-border flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>B(!1),className:"px-4 py-2 bg-muted hover:bg-muted/80 rounded-lg text-sm transition-colors",children:"Cancel"}),a.jsx("button",{onClick:Ne,disabled:!E.name||!E.title||!E.company||!E.email,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary-hover transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Deal"})]})]})})]})]})}function ce(t,e){switch(t){case"name":return e.trim()===""?"Name is required":"";case"title":return e.trim()===""?"Title is required":"";case"company":return e.trim()===""?"Company is required":"";case"email":return e.trim()===""?"Email is required":/\S+@\S+\.\S+/.test(e)?"":"Invalid email format";default:return""}}export{Bs as Pipeline};
