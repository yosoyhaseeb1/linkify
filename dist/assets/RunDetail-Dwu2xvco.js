import{c as R,i as q,k as _,m as E,r as o,j as e,n as L,R as x,o as h,q as B}from"./index-EQAU33AY.js";import{S as a}from"./skeleton-JA_CzeDa.js";import{A as H,a as z,b as P,c as U,d as $,e as V,f as Z,g as O}from"./alert-dialog-CsW7hHqa.js";import{b as Q}from"./useRuns-B67FFnPB.js";import{C as u}from"./circle-x-FFFZpPL1.js";import{C as v}from"./circle-check-big-DCLhpXb6.js";import{C as X}from"./clock-D-2HZQBK.js";import{S as w}from"./star-DboGi0dJ.js";import{E as C}from"./external-link-H3_0ftD6.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=R("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=R("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);function le(){var b;const{id:A}=q(),i=_(),{isFeatureEnabled:n}=E(),[S,d]=o.useState(!1),[m,j]=o.useState(!1),[g,p]=o.useState(!1),{run:l,isLoading:N,error:M}=Q(A),t=l==null?void 0:l.run,c=(l==null?void 0:l.prospects)||[],f=((b=c[0])==null?void 0:b.messages)||[],D=s=>{navigator.clipboard.writeText(s),h.success("Copied to clipboard")},I=s=>{const r=new Date(s);return new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(r)},F=s=>s>=90?"text-success":s>=75?"text-primary":s>=60?"text-warning":"text-muted-foreground",T=async()=>{j(!0),await new Promise(s=>setTimeout(s,1500)),j(!1),d(!1),h.success("Run canceled successfully"),i("/runs")};return!N&&M?e.jsx("div",{className:"p-8 max-w-7xl mx-auto",children:e.jsxs("div",{className:"glass-card p-6 rounded-xl text-center",children:[e.jsx(u,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h2",{className:"mb-2",children:"Run Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The run you're looking for doesn't exist or you don't have access to it."}),e.jsx("button",{onClick:()=>i("/runs"),className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary-hover transition-colors",children:"Back to Runs"})]})}):e.jsx("div",{className:"p-8 max-w-7xl mx-auto",children:N||!t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(a,{className:"w-24 h-4 mb-4"}),e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsx(a,{className:"w-64 h-10 mb-2"}),e.jsx(a,{className:"w-32 h-6"})]})})]}),e.jsxs("div",{className:"glass-card p-6 rounded-xl mb-6",children:[e.jsx(a,{className:"w-32 h-8 mb-4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[...Array(3)].map((s,r)=>e.jsxs("div",{children:[e.jsx(a,{className:"w-24 h-4 mb-2"}),e.jsx(a,{className:"w-40 h-6"})]},r))})]}),e.jsxs("div",{className:"glass-card p-6 rounded-xl mb-6",children:[e.jsx(a,{className:"w-48 h-8 mb-6"}),e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((s,r)=>e.jsx("div",{className:"p-4 rounded-lg bg-muted/30",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(a,{className:"w-48 h-6 mb-2"}),e.jsx(a,{className:"w-32 h-4 mb-1"}),e.jsx(a,{className:"w-40 h-4 mb-2"}),e.jsx(a,{className:"w-full h-16 mt-3"})]}),e.jsx(a,{className:"w-28 h-10"})]})},r))})]}),e.jsxs("div",{className:"glass-card p-6 rounded-xl mb-6",children:[e.jsx(a,{className:"w-40 h-8 mb-6"}),e.jsx("div",{className:"space-y-6",children:[...Array(2)].map((s,r)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(a,{className:"w-32 h-6"}),e.jsx(a,{className:"w-20 h-8"})]}),e.jsx(a,{className:"w-full h-32"})]},r))})]}),e.jsxs("div",{className:"glass-card p-6 rounded-xl",children:[e.jsx(a,{className:"w-40 h-8 mb-6"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-accent/20 rounded-lg",children:[e.jsxs("div",{children:[e.jsx(a,{className:"w-32 h-4 mb-2"}),e.jsx(a,{className:"w-24 h-6"})]}),e.jsx(a,{className:"w-40 h-10"})]}),e.jsx(a,{className:"w-full h-4 mt-4"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("button",{onClick:()=>i("/runs"),className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors mb-4",children:[e.jsx(L,{className:"w-4 h-4"}),"Back to Runs"]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{children:t.jobTitle}),t.status==="completed"?e.jsx(v,{className:"w-6 h-6 text-success"}):t.status==="failed"?e.jsx(u,{className:"w-6 h-6 text-destructive"}):e.jsx(X,{className:"w-6 h-6 text-warning"})]}),e.jsx("p",{className:"text-muted-foreground",children:t.company})]}),e.jsxs("div",{className:"flex gap-2",children:[(t.status==="queued"||t.status==="running")&&e.jsxs("button",{onClick:()=>d(!0),disabled:m,className:"px-4 py-2 bg-destructive/10 text-destructive rounded-lg hover:bg-destructive/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[m?e.jsx(x,{className:"w-4 h-4 animate-spin"}):e.jsx(u,{className:"w-4 h-4"}),e.jsx("span",{children:"Cancel Run"})]}),t.status==="failed"&&e.jsxs("button",{onClick:()=>{p(!0),setTimeout(()=>{p(!1),h.success("Run restarted successfully")},2e3)},disabled:g,className:"px-4 py-2 bg-green-500/10 text-green-500 rounded-lg hover:bg-green-500/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[g?e.jsx(x,{className:"w-4 h-4 animate-spin"}):e.jsx(x,{className:"w-4 h-4"}),e.jsx("span",{children:"Retry"})]})]})]})]}),e.jsxs("div",{className:"glass-card p-6 rounded-xl mb-6",children:[e.jsx("h2",{className:"mb-4",children:"Run Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Input Source"}),e.jsx("p",{children:t.jobUrl||"Manual Import"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Created"}),e.jsx("p",{children:I(t.createdAt)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Status"}),e.jsx("p",{className:"capitalize",children:t.status})]})]})]}),n("aiCandidateMatching")&&e.jsxs("div",{className:"glass-card p-6 rounded-xl mb-6 border-l-4 border-primary",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(k,{className:"w-6 h-6 text-primary"}),e.jsx("h2",{children:"AI Insights"}),e.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded text-xs",children:"Pro Feature"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-success/5 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(B,{className:"w-5 h-5 text-success"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Avg Match Score"})]}),e.jsx("p",{className:"text-3xl font-semibold text-success",children:"88%"})]}),e.jsxs("div",{className:"p-4 bg-primary/5 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(w,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"High-Quality Leads"})]}),e.jsx("p",{className:"text-3xl font-semibold",children:"12/15"})]}),e.jsxs("div",{className:"p-4 bg-info/5 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(v,{className:"w-5 h-5 text-info"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Est. Response Rate"})]}),e.jsx("p",{className:"text-3xl font-semibold",children:"24%"})]})]})]}),e.jsxs("div",{className:"glass-card p-6 rounded-xl mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{children:["Prospects Found (",c.length,")"]}),n("aiCandidateMatching")&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"Sorted by AI Match Score"})]}),c.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No prospects found yet."})}):e.jsx("div",{className:"space-y-3",children:c.map(s=>e.jsx("div",{className:"p-4 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{children:s.name}),s.relevanceScore&&e.jsxs("div",{className:"flex items-center gap-1 text-warning",children:[e.jsx(w,{className:"w-4 h-4 fill-current"}),e.jsxs("span",{className:"text-sm",children:[s.relevanceScore,"%"]})]}),n("aiCandidateMatching")&&s.aiMatchScore&&e.jsxs("div",{className:`flex items-center gap-1 ${F(s.aiMatchScore)}`,children:[e.jsx(k,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.aiMatchScore,"%"]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:s.title||"No title"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.company||t.company}),n("aiCandidateMatching")&&s.matchingReason&&e.jsxs("div",{className:"p-3 bg-info/5 rounded-lg mt-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"AI Matching Reason:"}),e.jsx("p",{className:"text-sm",children:s.matchingReason})]})]}),s.linkedin_url&&e.jsxs("a",{href:s.linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg font-medium transition-all duration-200 hover:bg-primary-hover hover:scale-[1.02]",children:[e.jsx("span",{children:"LinkedIn"}),e.jsx(C,{className:"w-4 h-4"})]})]})},s.id))})]}),e.jsxs("div",{className:"glass-card p-6 rounded-xl mb-6",children:[e.jsx("h2",{className:"mb-6",children:"Message Drafts"}),f.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No messages drafted yet."})}):e.jsx("div",{className:"space-y-6",children:f.map((s,r)=>{var y;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"capitalize",children:((y=s.type)==null?void 0:y.replace("-"," "))||`Message ${r+1}`}),e.jsxs("button",{onClick:()=>D(s.content||s.message||""),className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-secondary hover:bg-secondary/80 rounded-lg transition-colors",children:[e.jsx(G,{className:"w-4 h-4"}),"Copy"]})]}),e.jsx("div",{className:"p-4 bg-muted/30 rounded-lg",children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm",children:s.content||s.message||""})})]},r)})})]}),t.campaignId&&e.jsxs("div",{className:"glass-card p-6 rounded-xl",children:[e.jsx("h2",{className:"mb-6",children:"Campaign Status"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-accent/20 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"HeyReach Campaign"}),e.jsx("p",{className:"font-mono",children:t.campaignId})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"px-3 py-1.5 bg-warning/10 text-warning rounded text-sm",children:t.campaignStatus?t.campaignStatus.charAt(0).toUpperCase()+t.campaignStatus.slice(1):"Draft"}),e.jsxs("a",{href:`https://app.heyreach.io/campaigns/${t.campaignId}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg font-medium transition-all duration-200 hover:bg-primary-hover hover:scale-[1.02]",children:[e.jsx("span",{children:"View in HeyReach"}),e.jsx(C,{className:"w-4 h-4"})]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-4",children:"Campaign is paused by default. Review and activate in HeyReach when ready."})]}),e.jsx(H,{open:S,onOpenChange:d,children:e.jsxs(z,{children:[e.jsxs(P,{children:[e.jsx(U,{children:"Cancel Run"}),e.jsx($,{children:"Are you sure you want to cancel this run? This action cannot be undone."})]}),e.jsxs(V,{children:[e.jsx(Z,{children:"Cancel"}),e.jsx(O,{onClick:T,className:"bg-red-500 text-white hover:bg-red-600",children:m?"Canceling...":"Cancel Run"})]})]})})]})})}export{le as RunDetail};
