import{k as T,a as k,u as M,r,p as P,b as D,j as e,n as S,q as A,U as g,T as L}from"./index-EQAU33AY.js";import{A as F}from"./activity-BZnYrNmU.js";import{C as B}from"./circle-check-big-DCLhpXb6.js";import{A as i}from"./award-CWz-VA9B.js";function z(){var m,p,h,j,u,N;const f=T(),{currentOrg:o}=k(),{getToken:b}=M(),[v,x]=r.useState(!0),[c,w]=r.useState("30"),[a,y]=r.useState([]),[d,C]=r.useState({totalRuns:0,totalProspects:0,totalConnections:0,totalDeals:0});r.useEffect(()=>{R()},[o,c]);const R=async()=>{if(o)try{x(!0);const s=await b(),l=await fetch(`https://${P}.supabase.co/functions/v1/make-server-0d5eb2a5/analytics/team-performance/${o.id}?dateRange=${c}`,{headers:{Authorization:`Bearer ${D}`,"x-clerk-token":s}});if(!l.ok)throw new Error("Failed to load performance data");const n=await l.json();y(n.teamStats||[]),C(n.orgTotals||{totalRuns:0,totalProspects:0,totalConnections:0,totalDeals:0})}catch(s){console.error("Error loading performance data:",s)}finally{x(!1)}},t=s=>a.length===0?null:a.reduce((l,n)=>n[s]>l[s]?n:l);return v?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading team performance..."})]})}):e.jsxs("div",{className:"p-4 md:p-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsxs("button",{onClick:()=>f(-1),className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors mb-4",children:[e.jsx(S,{className:"w-4 h-4"}),"Back"]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"flex items-center gap-3",children:[e.jsx(A,{className:"w-8 h-8 text-primary"}),"Team Performance"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Compare team member metrics and identify top performers"})]}),e.jsxs("select",{value:c,onChange:s=>w(s.target.value),className:"px-4 py-2.5 bg-input-background border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-ring",children:[e.jsx("option",{value:"7",children:"Last 7 days"}),e.jsx("option",{value:"30",children:"Last 30 days"}),e.jsx("option",{value:"60",children:"Last 60 days"}),e.jsx("option",{value:"90",children:"Last 90 days"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"glass-card p-4 md:p-6 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(F,{className:"w-5 h-5 text-primary"})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Runs"})]}),e.jsx("p",{className:"text-2xl md:text-3xl font-bold",children:d.totalRuns})]}),e.jsxs("div",{className:"glass-card p-4 md:p-6 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:e.jsx(g,{className:"w-5 h-5 text-blue-500"})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Prospects"})]}),e.jsx("p",{className:"text-2xl md:text-3xl font-bold",children:d.totalProspects})]}),e.jsxs("div",{className:"glass-card p-4 md:p-6 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:e.jsx(L,{className:"w-5 h-5 text-green-500"})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Connections"})]}),e.jsx("p",{className:"text-2xl md:text-3xl font-bold",children:d.totalConnections})]}),e.jsxs("div",{className:"glass-card p-4 md:p-6 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-yellow-500/10 rounded-lg",children:e.jsx(B,{className:"w-5 h-5 text-yellow-500"})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Deals Closed"})]}),e.jsx("p",{className:"text-2xl md:text-3xl font-bold",children:d.totalDeals})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"glass-card p-6 rounded-xl border-2 border-yellow-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(i,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{className:"text-sm font-semibold text-yellow-500",children:"Most Connections"})]}),t("connectionsMade")&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xl font-bold mb-1",children:(m=t("connectionsMade"))==null?void 0:m.name}),e.jsx("p",{className:"text-3xl font-bold text-yellow-500",children:(p=t("connectionsMade"))==null?void 0:p.connectionsMade})]})]}),e.jsxs("div",{className:"glass-card p-6 rounded-xl border-2 border-green-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(i,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"text-sm font-semibold text-green-500",children:"Best Response Rate"})]}),t("responseRate")&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xl font-bold mb-1",children:(h=t("responseRate"))==null?void 0:h.name}),e.jsxs("p",{className:"text-3xl font-bold text-green-500",children:[(j=t("responseRate"))==null?void 0:j.responseRate,"%"]})]})]}),e.jsxs("div",{className:"glass-card p-6 rounded-xl border-2 border-blue-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(i,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"text-sm font-semibold text-blue-500",children:"Most Deals Closed"})]}),t("dealsClosed")&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xl font-bold mb-1",children:(u=t("dealsClosed"))==null?void 0:u.name}),e.jsx("p",{className:"text-3xl font-bold text-blue-500",children:(N=t("dealsClosed"))==null?void 0:N.dealsClosed})]})]})]}),e.jsxs("div",{className:"glass-card rounded-xl overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-border",children:e.jsx("h2",{className:"text-xl font-semibold",children:"Team Member Breakdown"})}),e.jsx("div",{className:"md:hidden",children:a.map(s=>e.jsxs("div",{className:"p-4 border-b border-border",children:[e.jsx("p",{className:"font-semibold mb-3",children:s.name}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Runs"}),e.jsx("p",{className:"font-semibold",children:s.runsCreated})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Prospects"}),e.jsx("p",{className:"font-semibold",children:s.prospectsFound})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Connections"}),e.jsx("p",{className:"font-semibold",children:s.connectionsMade})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Response Rate"}),e.jsxs("p",{className:"font-semibold",children:[s.responseRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Conversations"}),e.jsx("p",{className:"font-semibold",children:s.conversationsStarted})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Deals Closed"}),e.jsx("p",{className:"font-semibold",children:s.dealsClosed})]})]})]},s.id))}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-semibold",children:"Team Member"}),e.jsx("th",{className:"text-center p-4 font-semibold",children:"Runs"}),e.jsx("th",{className:"text-center p-4 font-semibold",children:"Prospects"}),e.jsx("th",{className:"text-center p-4 font-semibold",children:"Connections"}),e.jsx("th",{className:"text-center p-4 font-semibold",children:"Response Rate"}),e.jsx("th",{className:"text-center p-4 font-semibold",children:"Conversations"}),e.jsx("th",{className:"text-center p-4 font-semibold",children:"Deals"})]})}),e.jsx("tbody",{children:a.map(s=>e.jsxs("tr",{className:"border-b border-border hover:bg-muted/30 transition-colors",children:[e.jsx("td",{className:"p-4 font-semibold",children:s.name}),e.jsx("td",{className:"p-4 text-center",children:s.runsCreated}),e.jsx("td",{className:"p-4 text-center",children:s.prospectsFound}),e.jsx("td",{className:"p-4 text-center",children:s.connectionsMade}),e.jsx("td",{className:"p-4 text-center",children:e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${s.responseRate>=30?"bg-green-500/10 text-green-500":s.responseRate>=15?"bg-yellow-500/10 text-yellow-500":"bg-muted text-muted-foreground"}`,children:[s.responseRate,"%"]})}),e.jsx("td",{className:"p-4 text-center",children:s.conversationsStarted}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("span",{className:"px-3 py-1 bg-primary/10 text-primary rounded-full text-sm font-semibold",children:s.dealsClosed})})]},s.id))})]})}),a.length===0&&e.jsxs("div",{className:"p-12 text-center text-muted-foreground",children:[e.jsx(g,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No team activity in the selected time period"})]})]})]})}export{z as TeamPerformance};
