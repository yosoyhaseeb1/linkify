import{k as w,a as y,u as C,r as l,p as k,b as A,j as e,n as G,an as M,h as x,U as u,q as h}from"./index-EQAU33AY.js";import{C as P}from"./clock-D-2HZQBK.js";import{C as i}from"./circle-check-big-DCLhpXb6.js";import{M as S}from"./message-circle-DT_C4On-.js";function $(){const p=w(),{currentOrg:r}=y(),{getToken:g}=C(),[j,c]=l.useState(!0),[a,N]=l.useState([]),[n,f]=l.useState({weeklyConnectionsGoal:50,weeklyConnectionsActual:0});l.useEffect(()=>{o();const s=setInterval(o,5*60*1e3);return()=>clearInterval(s)},[r]);const o=async()=>{if(r)try{c(!0);const s=await g(),t=await fetch(`https://${k}.supabase.co/functions/v1/make-server-0d5eb2a5/analytics/daily-standup/${r.id}`,{headers:{Authorization:`Bearer ${A}`,"x-clerk-token":s}});if(!t.ok)throw new Error("Failed to load standup data");const m=await t.json();N(m.memberActivity||[]),f(m.teamGoals||{weeklyConnectionsGoal:50,weeklyConnectionsActual:0})}catch(s){console.error("Error loading standup data:",s)}finally{c(!1)}},d=n.weeklyConnectionsGoal>0?Math.min(n.weeklyConnectionsActual/n.weeklyConnectionsGoal*100,100):0,v=a.reduce((s,t)=>s+(t.newConnections||0),0),b=a.reduce((s,t)=>s+(t.repliesPending||0),0);return j?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading daily standup..."})]})}):e.jsxs("div",{className:"p-4 md:p-8 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsxs("button",{onClick:()=>p(-1),className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors mb-4",children:[e.jsx(G,{className:"w-4 h-4"}),"Back"]}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(M,{className:"w-8 h-8 text-primary"}),e.jsx("h1",{children:"Daily Standup"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Team activity from the last 24 hours"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[e.jsx(P,{className:"w-4 h-4 inline mr-1"}),"Last updated: ",new Date().toLocaleTimeString()]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"glass-card p-6 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:e.jsx(i,{className:"w-5 h-5 text-green-500"})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"New Connections"})]}),e.jsx("p",{className:"text-3xl font-bold",children:v}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Last 24 hours"})]}),e.jsxs("div",{className:"glass-card p-6 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-yellow-500/10 rounded-lg",children:e.jsx(x,{className:"w-5 h-5 text-yellow-500"})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Replies Pending"})]}),e.jsx("p",{className:"text-3xl font-bold",children:b}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Needs response"})]}),e.jsxs("div",{className:"glass-card p-6 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:e.jsx(u,{className:"w-5 h-5 text-blue-500"})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Active Members"})]}),e.jsx("p",{className:"text-3xl font-bold",children:a.filter(s=>s.newConnections>0||s.conversationsActive>0).length}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["of ",a.length," total"]})]})]}),e.jsxs("div",{className:"glass-card p-6 rounded-xl mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(h,{className:"w-5 h-5 text-primary"}),"Weekly Team Goal"]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[n.weeklyConnectionsActual," / ",n.weeklyConnectionsGoal," connections"]})]}),e.jsxs("span",{className:"text-2xl font-bold text-primary",children:[Math.round(d),"%"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-primary-hover transition-all duration-500 rounded-full",style:{width:`${d}%`}})}),d>=100&&e.jsxs("div",{className:"mt-4 p-3 bg-green-500/10 border border-green-500/20 rounded-lg text-green-500 text-sm flex items-center gap-2",children:[e.jsx(i,{className:"w-4 h-4"}),"ðŸŽ‰ Congratulations! Weekly goal achieved!"]})]}),e.jsxs("div",{className:"glass-card rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-border",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Team Member Updates"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Individual activity breakdown"})]}),e.jsx("div",{className:"divide-y divide-border",children:a.map(s=>{const t=s.newConnections>0||s.conversationsActive>0||s.repliesPending>0;return e.jsxs("div",{className:`p-6 ${t?"bg-primary/5":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.name}),!t&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"No activity today"})]}),t&&e.jsx("div",{className:"px-3 py-1 bg-primary/10 text-primary rounded-full text-sm font-semibold",children:"Active"})]}),t&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(i,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"New Connections"})]}),e.jsx("p",{className:"text-2xl font-bold",children:s.newConnections||0})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(S,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Active Convos"})]}),e.jsx("p",{className:"text-2xl font-bold",children:s.conversationsActive||0})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(x,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Pending Replies"})]}),e.jsx("p",{className:"text-2xl font-bold",children:s.repliesPending||0})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(h,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Runs Completed"})]}),e.jsx("p",{className:"text-2xl font-bold",children:s.runsCompleted||0})]})]})]},s.id)})}),a.length===0&&e.jsxs("div",{className:"p-12 text-center text-muted-foreground",children:[e.jsx(u,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No team members found"})]})]})]})}export{$ as DailyStandup};
