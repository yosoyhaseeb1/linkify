import{c as q,u as Oe,a as Qe,r as l,j as e,g as Je,M as fe,X as We,h as M,C as I,o as C}from"./index-EQAU33AY.js";import{f as Xe,s as Ye}from"./userDataService-CnTdgpxI.js";import{S as u}from"./skeleton-JA_CzeDa.js";import{E as je}from"./EmptyState-4LhyYAnL.js";import{E as Ke}from"./ErrorBanner-BZpl489k.js";import{P as Ze,a as es,b as f,c as ss,d as _,e as be,f as ts}from"./pagination-Bw_IJ8FX.js";import{A as ye,a as Ne,b as ve,c as we,d as ke,e as Ce,f as Se,g as De}from"./alert-dialog-CsW7hHqa.js";import{F as as}from"./filter-BIZpbMNA.js";import{D as rs}from"./download-CatP__KJ.js";import{P as ls}from"./plus-CsoShjA1.js";import{M as B}from"./map-pin-Dsq2GR1e.js";import{L as ee,P as ns}from"./phone-BgKa8uU3.js";import{M as se}from"./mail-DipvDLRb.js";import{E as os}from"./ellipsis-vertical-3Q3gJHG9.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=q("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=q("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=q("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=q("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),te=[{id:"conversation_started",label:"Conversation Started",color:"bg-blue-500/20 text-blue-500"},{id:"qualification",label:"Qualification",color:"bg-purple-500/20 text-purple-500"},{id:"proposal_sent",label:"Proposal Sent",color:"bg-green-500/20 text-green-500"},{id:"signed_mandate",label:"Signed Mandate",color:"bg-orange-500/20 text-orange-500"},{id:"lost",label:"Lost",color:"bg-gray-500/20 text-gray-500"}],_e=["Engineering","Product","Design","Sales","Marketing","AI/ML","Cloud","HR","Hot Lead","Decision Maker","Enterprise","Startup","Success","Cold"];function _s(){const{user:x,getToken:T}=Oe(),{currentOrg:R}=Qe(),[p,L]=l.useState([]),[j,ae]=l.useState(""),[w,U]=l.useState("all"),[b,re]=l.useState([]),[g,le]=l.useState("all"),[V,Te]=l.useState(!1),[H,ne]=l.useState("table"),[c,y]=l.useState([]),[S,Le]=l.useState("activity"),[n,P]=l.useState(null),[z,E]=l.useState(!0),[Pe,G]=l.useState(!1),[Ee,oe]=l.useState(!1),[Fe,O]=l.useState(!1),[d,N]=l.useState(1),Q=25,[$e,J]=l.useState(!1),[ie,W]=l.useState(!1),[Me,X]=l.useState(!1),[ms,Ie]=l.useState([]),[m,ce]=l.useState(new Set),[Y,Be]=l.useState(!1),[t,h]=l.useState({name:"",email:"",title:"",company:"",phone:"",linkedin_url:"",location:"",notes:"",tags:[],stage:"conversation_started"}),[o,K]=l.useState({name:"",email:"",title:"",company:""}),de=async()=>{var s;if(!(x!=null&&x.id)){E(!1);return}E(!0),G(!1),oe(!1);try{const a=await T();if(!a){console.error("Failed to get authentication token"),G(!0),E(!1);return}const r=await Xe(x.id,a);L(r.contacts||[]),console.log(`✅ Loaded ${((s=r.contacts)==null?void 0:s.length)||0} contacts for user ${x.id}`)}catch(a){console.error("Error loading contacts:",a),G(!0)}finally{E(!1)}},me=async(s,a)=>{if(!(x!=null&&x.id))return!1;const r=p;L(s),X(!0);try{const i=await T();if(!i)throw new Error("No token");if(await Ye(x.id,i,s))return Ie(s),X(!1),!0;throw new Error("Save failed")}catch(i){return console.error("Save failed, rolling back:",i),L(r),X(!1),C.error("Failed to save. Changes reverted."),!1}};l.useEffect(()=>{de()},[x==null?void 0:x.id,T]),l.useEffect(()=>{const s={name:"",email:"",title:"",company:""};m.has("name")&&!t.name.trim()&&(s.name="Name is required"),m.has("email")&&(t.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(s.email="Please enter a valid email"):s.email="Email is required"),m.has("title")&&!t.title.trim()&&(s.title="Title is required"),m.has("company")&&!t.company.trim()&&(s.company="Company is required"),K(s);const a=t.name.trim()&&t.email.trim()&&t.title.trim()&&t.company.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email);Be(a)},[t,m]);const qe=()=>{oe(!0),de()},k=[...p.filter(s=>{const a=s.name.toLowerCase().includes(j.toLowerCase())||s.company.toLowerCase().includes(j.toLowerCase())||s.title.toLowerCase().includes(j.toLowerCase())||s.email.toLowerCase().includes(j.toLowerCase()),r=w==="all"||s.stage===w,i=b.length===0||b.some(D=>s.tags.includes(D)),A=(()=>{if(g==="all")return!0;const D=new Date(s.created_at),Z=(new Date().getTime()-D.getTime())/(1e3*60*60*24);return g==="today"?Z<1:g==="week"?Z<7:g==="month"?Z<30:!0})();return a&&r&&i&&A})].sort((s,a)=>S==="name"?s.name.localeCompare(a.name):S==="company"?s.company.localeCompare(a.company):S==="created"?new Date(a.created_at).getTime()-new Date(s.created_at).getTime():S==="activity"?new Date(a.last_activity_at).getTime()-new Date(s.last_activity_at).getTime():0),v=Math.ceil(k.length/Q),xe=(d-1)*Q,Re=xe+Q,ue=k.slice(xe,Re);l.useEffect(()=>{N(1)},[j,w,b,g,S]);const he={total:p.length,conversation_started:p.filter(s=>s.stage==="conversation_started").length,qualification:p.filter(s=>s.stage==="qualification").length,proposal_sent:p.filter(s=>s.stage==="proposal_sent").length,signed_mandate:p.filter(s=>s.stage==="signed_mandate").length},Ue=s=>{re(a=>a.includes(s)?a.filter(r=>r!==s):[...a,s])},Ve=s=>{h(a=>({...a,tags:a.tags.includes(s)?a.tags.filter(r=>r!==s):[...a.tags,s]}))},F=s=>{ce(a=>new Set(a).add(s))},He=async()=>{if(Y){W(!0);try{if(!await T()){C.error("Authentication failed. Please try logging in again."),W(!1);return}const a={id:crypto.randomUUID(),name:t.name.trim(),email:t.email.trim(),title:t.title.trim(),company:t.company.trim(),phone:t.phone.trim(),linkedin_url:t.linkedin_url.trim(),location:t.location.trim(),notes:t.notes.trim(),tags:t.tags,stage:t.stage,run_id:"manual-add",organization_id:(R==null?void 0:R.id)||"",last_activity_at:new Date().toISOString(),created_at:new Date().toISOString(),source:"Manual Entry"},r=[a,...p];await me(r)!==!1?(h({name:"",email:"",title:"",company:"",phone:"",linkedin_url:"",location:"",notes:"",tags:[],stage:"conversation_started"}),K({name:"",email:"",title:"",company:""}),J(!1),C.success(`${a.name} added to contacts!`),console.log("✅ Contact added successfully:",a)):(L(p),C.error("Failed to save contact. Please try again."))}catch(s){console.error("Error adding contact:",s),C.error("Failed to save contact. Please check your connection.")}finally{W(!1)}}},pe=()=>{console.log("Exporting contacts:",c)},ze=async()=>{const s=c.length,a=p.filter(i=>!c.includes(i.id));await me(a)!==!1?(y([]),C.success(`${s} contact${s>1?"s":""} deleted`)):C.error("Failed to delete contacts")},$=s=>te.find(r=>r.id===s)||{label:s,color:"bg-gray-500/20 text-gray-500"},ge=s=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(new Date(s)),Ge=s=>{const a=new Date(s),i=new Date().getTime()-a.getTime(),A=Math.floor(i/36e5),D=Math.floor(i/864e5);return A<24?`${A}h ago`:D===1?"Yesterday":`${D}d ago`};return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"mb-2",children:"Contacts"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your prospect database with advanced filtering and segmentation"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 sm:gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>U("all"),className:`glass-card rounded-lg p-4 transition-all ${w==="all"?"ring-2 ring-primary":""}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:he.total}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Contacts"})]}),te.slice(0,5).map(s=>e.jsxs("button",{onClick:()=>U(s.id),className:`glass-card rounded-lg p-4 transition-all ${w===s.id?"ring-2 ring-primary":""}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:he[s.id]||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.label})]},s.id))]}),e.jsxs("div",{className:"glass-card rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 mb-4",children:[e.jsxs("div",{className:"w-full sm:flex-1 relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search contacts...",value:j,onChange:s=>ae(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-muted border border-border rounded-lg focus:border-primary focus:outline-none text-sm"})]}),e.jsxs("button",{onClick:()=>Te(!V),className:`flex items-center gap-2 px-3 sm:px-4 py-2 rounded-lg text-sm transition-colors ${V?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:[e.jsx(as,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Filters"}),(b.length>0||g!=="all")&&e.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-primary-foreground/20 rounded text-xs",children:b.length+(g!=="all"?1:0)})]}),e.jsxs("select",{value:S,onChange:s=>Le(s.target.value),className:"px-3 sm:px-4 py-2 bg-muted border border-border rounded-lg text-sm focus:border-primary focus:outline-none min-w-0",children:[e.jsx("option",{value:"activity",children:"Activity"}),e.jsx("option",{value:"created",children:"Created"}),e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"company",children:"Company"})]}),e.jsxs("div",{className:"flex gap-1 bg-muted rounded-lg p-1",children:[e.jsx("button",{onClick:()=>ne("table"),className:`p-2 rounded transition-colors ${H==="table"?"bg-background":"hover:bg-background/50"}`,"aria-label":"Table view",children:e.jsx(cs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ne("grid"),className:`p-2 rounded transition-colors ${H==="grid"?"bg-background":"hover:bg-background/50"}`,"aria-label":"Grid view",children:e.jsx(is,{className:"w-4 h-4"})})]}),e.jsxs("button",{onClick:pe,className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-muted hover:bg-muted/80 rounded-lg text-sm transition-colors","aria-label":"Export contacts",children:[e.jsx(rs,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),e.jsxs("button",{onClick:()=>J(!0),className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary-hover transition-colors text-sm",children:[e.jsx(ls,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Contact"})]}),Me&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(fe,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Saving..."})]})]}),V&&e.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-2 block",children:"Filter by Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:_e.map(s=>e.jsx("button",{onClick:()=>Ue(s),className:`px-3 py-1.5 rounded-lg text-xs transition-colors ${b.includes(s)?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:s},s))})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Added:"}),e.jsx("div",{className:"flex gap-2",children:[{value:"all",label:"All Time"},{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"}].map(s=>e.jsx("button",{onClick:()=>le(s.value),className:`px-3 py-1.5 rounded-lg text-xs transition-colors ${g===s.value?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:s.label},s.value))}),e.jsx("button",{onClick:()=>{re([]),le("all"),U("all"),ae("")},className:"ml-auto px-4 py-1.5 bg-muted hover:bg-muted/80 rounded-lg text-xs transition-colors",children:"Reset All Filters"})]})]}),c.length>0&&e.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-border mt-4",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[c.length," contact",c.length>1?"s":""," selected"]}),e.jsx("button",{onClick:pe,className:"px-3 py-1.5 bg-blue-500/10 text-blue-500 rounded-lg text-sm hover:bg-blue-500/20 transition-colors",children:"Export Selected"}),e.jsx("button",{onClick:()=>O(!0),className:"px-3 py-1.5 bg-red-500/10 text-red-500 rounded-lg text-sm hover:bg-red-500/20 transition-colors",children:"Delete Selected"}),e.jsx("button",{onClick:()=>y([]),className:"px-3 py-1.5 bg-muted rounded-lg text-sm hover:bg-muted/80 transition-colors",children:"Deselect All"})]})]}),H==="table"?e.jsx("div",{className:"glass-card rounded-lg overflow-hidden",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50 border-b border-border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left w-8",children:e.jsx("input",{type:"checkbox",checked:c.length===k.length&&k.length>0,onChange:s=>{s.target.checked?y(k.map(a=>a.id)):y([])},className:"rounded border-border"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs text-muted-foreground",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs text-muted-foreground",children:"Company"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs text-muted-foreground",children:"Stage"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs text-muted-foreground",children:"Tags"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs text-muted-foreground",children:"Last Activity"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs text-muted-foreground",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:z?e.jsx(e.Fragment,{children:[...Array(8)].map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx(u,{className:"w-4 h-4 rounded"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{className:"w-8 h-8 rounded-full"}),e.jsxs("div",{children:[e.jsx(u,{className:"w-32 h-4 mb-1"}),e.jsx(u,{className:"w-24 h-3"})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(u,{className:"w-28 h-4"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(u,{className:"w-24 h-6 rounded"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(u,{className:"w-16 h-5 rounded"}),e.jsx(u,{className:"w-20 h-5 rounded"})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(u,{className:"w-16 h-4"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-12 h-4"}),e.jsx(u,{className:"w-4 h-4 rounded-full"}),e.jsx(u,{className:"w-4 h-4 rounded-full"})]})})]},a))}):Pe?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-2",children:e.jsx(Ke,{message:"Failed to load contacts. Please try again.",onRetry:qe,isRetrying:Ee})})}):e.jsx(e.Fragment,{children:ue.map(s=>{const a=$(s.stage);return e.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:c.includes(s.id),onChange:r=>{r.target.checked?y([...c,s.id]):y(c.filter(i=>i!==s.id))},className:"rounded border-border"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium",children:s.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.title})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:s.company})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs ${a.color}`,children:a.label})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.tags.slice(0,2).map(r=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 bg-muted rounded text-xs",children:r},r)),s.tags.length>2&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 bg-muted rounded text-xs text-muted-foreground",children:["+",s.tags.length-2]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm text-muted-foreground",children:Ge(s.last_activity_at)})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>P(s),className:"text-sm text-primary hover:text-primary-hover transition-colors",children:"View"}),e.jsx("a",{href:s.linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"p-1 hover:bg-accent rounded transition-colors",children:e.jsx(ee,{className:"w-4 h-4 text-muted-foreground"})}),e.jsx("a",{href:`mailto:${s.email}`,className:"p-1 hover:bg-accent rounded transition-colors",children:e.jsx(se,{className:"w-4 h-4 text-muted-foreground"})})]})})]},s.id)})})})]}),!z&&k.length===0&&e.jsx("div",{className:"py-4",children:e.jsx(je,{icon:Ae,headline:"No contacts in your database yet",description:j||w!=="all"||b.length>0||g!=="all"?"Try adjusting your filters to see more results.":"Contacts are automatically added from your automation runs."})})]})}):e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[ue.map(s=>{const a=$(s.stage);return e.jsxs("div",{className:"glass-card rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"font-medium",children:s.name.charAt(0)})}),e.jsx("input",{type:"checkbox",checked:c.includes(s.id),onChange:r=>{r.target.checked?y([...c,s.id]):y(c.filter(i=>i!==s.id))},className:"rounded border-border"})]}),e.jsx("h3",{className:"text-sm font-medium mb-1 truncate",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 truncate",children:s.title}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mb-3",children:[e.jsx(B,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:s.company})]}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs mb-3 ${a.color}`,children:a.label}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:s.tags.slice(0,3).map(r=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 bg-muted rounded text-xs",children:r},r))}),e.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-border",children:[e.jsx("button",{onClick:()=>P(s),className:"flex-1 px-3 py-1.5 bg-primary text-primary-foreground rounded text-xs hover:bg-primary-hover transition-colors",children:"View Details"}),e.jsx("a",{href:s.linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 hover:bg-accent rounded transition-colors",children:e.jsx(ee,{className:"w-4 h-4 text-muted-foreground"})}),e.jsx("a",{href:`mailto:${s.email}`,className:"p-1.5 hover:bg-accent rounded transition-colors",children:e.jsx(se,{className:"w-4 h-4 text-muted-foreground"})})]})]},s.id)}),!z&&k.length===0&&e.jsx("div",{className:"col-span-4",children:e.jsx(je,{icon:Ae,headline:"No contacts in your database yet",description:j||w!=="all"||b.length>0||g!=="all"?"Try adjusting your filters to see more results.":"Contacts are automatically added from your automation runs."})})]}),n&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>P(null),children:e.jsxs("div",{className:"glass-card rounded-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-border",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-medium",children:n.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h2",{className:"mb-1",children:n.name}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:n.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:n.company})]})]})]}),e.jsx("button",{onClick:()=>P(null),className:"p-2 hover:bg-accent rounded-lg transition-colors",children:e.jsx(We,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm mb-3",children:"Contact Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("a",{href:`mailto:${n.email}`,className:"flex items-center gap-2 text-sm hover:text-primary transition-colors",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:n.email})]}),n.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(ns,{className:"w-4 h-4"}),e.jsx("span",{children:n.phone})]}),e.jsxs("a",{href:n.linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-primary hover:text-primary-hover transition-colors",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:"LinkedIn Profile"}),e.jsx(os,{className:"w-3 h-3"})]}),n.location&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{children:n.location})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm mb-3",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.tags.map(s=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-muted rounded-lg text-sm",children:[e.jsx(ds,{className:"w-3 h-3 mr-1"}),s]},s))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm mb-3",children:"Notes"}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg text-sm text-muted-foreground",children:n.notes||"No notes yet"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm mb-3",children:"Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Source:"}),e.jsx("span",{children:n.source})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Added:"}),e.jsx("span",{children:ge(n.created_at)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Activity:"}),e.jsx("span",{children:ge(n.last_activity_at)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Stage:"}),e.jsx("span",{className:`${$(n.stage).color} px-2 py-0.5 rounded`,children:$(n.stage).label})]})]})]})]})]})}),e.jsx(ye,{open:Fe,onOpenChange:O,children:e.jsxs(Ne,{children:[e.jsxs(ve,{children:[e.jsx(we,{children:"Are you sure?"}),e.jsxs(ke,{children:["Delete ",c.length>1?`${c.length} contacts`:"1 contact","? This will remove them from all pipelines and tasks."]})]}),e.jsxs(Ce,{children:[e.jsx(Se,{children:"Cancel"}),e.jsx(De,{onClick:()=>{ze(),O(!1)},children:"Delete"})]})]})}),e.jsx(ye,{open:$e,onOpenChange:s=>{J(s),s||(ce(new Set),K({name:"",email:"",title:"",company:""}))},children:e.jsxs(Ne,{className:"max-w-4xl",children:[e.jsxs(ve,{children:[e.jsx(we,{children:"Add New Contact"}),e.jsx(ke,{children:"Enter the details of the new contact you want to add to your database."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-muted-foreground mb-1 block",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.name,onChange:s=>h({...t,name:s.target.value}),onBlur:()=>F("name"),className:`w-full px-3 py-2 bg-muted border rounded-lg focus:outline-none text-sm transition-colors ${o.name?"border-red-500 focus:border-red-500":t.name.trim()&&m.has("name")?"border-green-500 focus:border-green-500":"border-border focus:border-primary"}`,placeholder:"John Doe"}),o.name&&e.jsxs("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[e.jsx(M,{className:"w-3 h-3"}),o.name]}),!o.name&&t.name.trim()&&m.has("name")&&e.jsxs("p",{className:"text-xs text-green-500 mt-1 flex items-center gap-1",children:[e.jsx(I,{className:"w-3 h-3"}),"Looks good!"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-muted-foreground mb-1 block",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.title,onChange:s=>h({...t,title:s.target.value}),onBlur:()=>F("title"),className:`w-full px-3 py-2 bg-muted border rounded-lg focus:outline-none text-sm transition-colors ${o.title?"border-red-500 focus:border-red-500":t.title.trim()&&m.has("title")?"border-green-500 focus:border-green-500":"border-border focus:border-primary"}`,placeholder:"VP of Engineering"}),o.title&&e.jsxs("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[e.jsx(M,{className:"w-3 h-3"}),o.title]}),!o.title&&t.title.trim()&&m.has("title")&&e.jsxs("p",{className:"text-xs text-green-500 mt-1 flex items-center gap-1",children:[e.jsx(I,{className:"w-3 h-3"}),"Looks good!"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Phone"}),e.jsx("input",{type:"text",value:t.phone,onChange:s=>h({...t,phone:s.target.value}),className:"w-full px-3 py-2 bg-muted border border-border rounded-lg focus:border-primary focus:outline-none text-sm",placeholder:"+1 (555) 123-4567"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-muted-foreground mb-1 block",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:t.email,onChange:s=>h({...t,email:s.target.value}),onBlur:()=>F("email"),className:`w-full px-3 py-2 bg-muted border rounded-lg focus:outline-none text-sm transition-colors ${o.email?"border-red-500 focus:border-red-500":t.email.trim()&&!o.email&&m.has("email")?"border-green-500 focus:border-green-500":"border-border focus:border-primary"}`,placeholder:"john@company.com"}),o.email&&e.jsxs("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[e.jsx(M,{className:"w-3 h-3"}),o.email]}),!o.email&&t.email.trim()&&m.has("email")&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)&&e.jsxs("p",{className:"text-xs text-green-500 mt-1 flex items-center gap-1",children:[e.jsx(I,{className:"w-3 h-3"}),"Looks good!"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-muted-foreground mb-1 block",children:["Company ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.company,onChange:s=>h({...t,company:s.target.value}),onBlur:()=>F("company"),className:`w-full px-3 py-2 bg-muted border rounded-lg focus:outline-none text-sm transition-colors ${o.company?"border-red-500 focus:border-red-500":t.company.trim()&&m.has("company")?"border-green-500 focus:border-green-500":"border-border focus:border-primary"}`,placeholder:"Acme Inc."}),o.company&&e.jsxs("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[e.jsx(M,{className:"w-3 h-3"}),o.company]}),!o.company&&t.company.trim()&&m.has("company")&&e.jsxs("p",{className:"text-xs text-green-500 mt-1 flex items-center gap-1",children:[e.jsx(I,{className:"w-3 h-3"}),"Looks good!"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-1 block",children:"LinkedIn URL"}),e.jsx("input",{type:"text",value:t.linkedin_url,onChange:s=>h({...t,linkedin_url:s.target.value}),className:"w-full px-3 py-2 bg-muted border border-border rounded-lg focus:border-primary focus:outline-none text-sm",placeholder:"linkedin.com/in/johndoe"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Location"}),e.jsx("input",{type:"text",value:t.location,onChange:s=>h({...t,location:s.target.value}),className:"w-full px-3 py-2 bg-muted border border-border rounded-lg focus:border-primary focus:outline-none text-sm",placeholder:"San Francisco, CA"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Stage"}),e.jsx("select",{value:t.stage,onChange:s=>h({...t,stage:s.target.value}),className:"w-full px-3 py-2 bg-muted border border-border rounded-lg focus:border-primary focus:outline-none text-sm",children:te.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Notes"}),e.jsx("textarea",{value:t.notes,onChange:s=>h({...t,notes:s.target.value}),className:"w-full px-3 py-2 bg-muted border border-border rounded-lg focus:border-primary focus:outline-none text-sm resize-none",rows:2,placeholder:"Additional notes..."})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-2 block",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:_e.map(s=>e.jsx("button",{type:"button",onClick:()=>Ve(s),className:`px-3 py-1 rounded-lg text-xs transition-colors ${t.tags.includes(s)?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:s},s))})]}),e.jsxs(Ce,{children:[e.jsx(Se,{children:"Cancel"}),e.jsx(De,{onClick:He,disabled:ie||!Y,className:Y?"":"opacity-50 cursor-not-allowed",children:ie?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-4 h-4 animate-spin mr-2"}),"Adding..."]}):"Add Contact"})]})]})}),v>1&&e.jsx(Ze,{className:"mt-6",children:e.jsxs(es,{children:[e.jsx(f,{children:e.jsx(ss,{onClick:()=>N(s=>Math.max(s-1,1)),disabled:d===1})}),d>2&&e.jsx(f,{children:e.jsx(_,{onClick:()=>N(1),children:"1"})}),d>3&&e.jsx(f,{children:e.jsx(be,{})}),d>1&&e.jsx(f,{children:e.jsx(_,{onClick:()=>N(d-1),children:d-1})}),e.jsx(f,{children:e.jsx(_,{onClick:()=>N(d),className:"bg-primary text-primary-foreground",children:d})}),d<v&&e.jsx(f,{children:e.jsx(_,{onClick:()=>N(d+1),children:d+1})}),d<v-2&&e.jsx(f,{children:e.jsx(be,{})}),d<v-1&&e.jsx(f,{children:e.jsx(_,{onClick:()=>N(v),children:v})}),e.jsx(f,{children:e.jsx(ts,{onClick:()=>N(s=>Math.min(s+1,v)),disabled:d===v})})]})})]})}export{_s as Contacts};
